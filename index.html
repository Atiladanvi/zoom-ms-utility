<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Zoom MS-50G Patch Editor</title>
<link href="https://fonts.googleapis.com/css?family=Audiowide" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
<script src="bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>
<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="bower_components/webaudio-controls/webaudio-controls.html" >
<script>
//
// Zoom MS-50G Utility
//
// MIDI commands
//  These commands are inferred by irresponsible experiment and not garanteed.
//
//  ProgramChange : [0xc0,pp]
//     Select patch by MIDI Program Change pp=patch number (0-49)
//  IdentityRequest : [0xf0,0x7e,0x00,0x06,0x01,0xf7]
//     Identity Request (MIDI Universal System Exclusive). It return [0xf0,0x7e,0x00,0x06,0x02,0x52,0x58,0x00,0x00,0x00,0x33,0x2e,0x30,0x30,0xf7]
//  TunerMode : [0xb0,0x4a,mm]
//     Tuner Mode On/Off. MIDI Control Change CC#74. mm<64:off mm>=64:on
//  WritePatch :          [0xf0,0x52,0x00,0x58,0x28,effect1,effect2,...effect6,patch-name,0xf7] (146bytes)
//     Write 146bytes patch-data to current program.
//     It consist of [0xf8,0x52,0x00,0x58,0x28, effect1,effect2,...effect6, patch-name,0xf7]
//  RequestPatch :        [0xf0,0x52,0x00,0x58,0x29,0xf7]
//     Requst patch-data of current program. it returns 146 bytes patch-data (same as WritePatch command)
//  EffectEnable :        [0xf0,0x52,0x00,0x58,0x31,nn,0x00,mm,0x00,0xf7]
//     Effect On/Off. It seems effective only for effect1-3.  nn=effect#(0-2) mm=0:off mm=1:on
//  ParameterEdit :       [0xf0,0x52,0x00,0x58,0x31,nn,pp,vvLSB,vvMSB,0xf7]
//     Parameter value edit. nn=effect# pp=param#+2 vv=value. value range is depends on each effect.
//  Patch Store??? :      [0xf0,0x52,0x00,0x58,0x32,0x01,0x00,0x00,0x2c,0x00,0x00,0x00,0x00,0x00,0xf7]
//     Message (Storing...)?
//  RequestCurrentProgram : [0xf0,0x52,0x00,0x58,0x33,0xf7]
//     Request current bank&program. It returns [0xb0,0x00,0x00, 0xb0,0x20,0x00, 0xc0,pp] pp=program#(0-49) bank is always 0
//  ParameterEditEnable : [0xf0,0x52,0x00,0x58,0x50,0xf7]
//     Parameter value edit enable. Needed before Parameter Edit.
//  ParameterEditDisable :[0xf0,0x52,0x00,0x58,0x51,0xf7]
//     Parameter value edit disable.
//  ??? :                 [0xf0,0x52,0x00,0x58,0x60,0xf7]
//

var midiif=null;
var midioutputs=[];
var midiin=null;
var midirecv="";
var patches=[];
var clipboard=null;
var inst=null;
var currentpatch=-1;
var currenteffect=0;
var currentparam=0;
var timer,timerprg;
var dragtarget=null;
var ready=false;

var patchkeymap=[
  "a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t",
  "A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T",
  "1","2","3","4","5","6","7","8","9","0"];
var effectkeymap=["F1","F2","F3","F4","F5","F6"];

var emptypatch=[
  0xf0,0x52,0x00,0x58,0x28,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x05,0x0f,0x45,0x00,0x6d,0x70,0x74,0x79,0x20,0x20,
  0x20,0x00,0x20,0x20,0x00,0xf7
]
var effectlist={
  0x00000000:{name:"THRU",group:"THRU",order:1,install:1,param:[]},
  0x00100002:{name:"Comp",group:"COMP",order:100,install:0,param:[
    {name:"Sense",def:6,max:10},
    {name:"Tone",def:6,max:10},
    {name:"Level",def:100,max:150},
    {name:"ATTCK",def:0,max:1,disp:["Slow","Fast"]}
  ]},
  0x00200002:{name:"RackComp",group:"COMP",order:101,install:0,param:[
    {name:"THRSH",def:40,max:50},
    {name:"Ratio",def:5,max:9,disp:1},
    {name:"Level",def:100,max:150},
    {name:"ATTCK",def:6,max:9,disp:1}
  ]},
  0x00400002:{name:"M Comp",group:"COMP",order:102,install:0,param:[
    {name:"THRSH",def:40,max:50},
    {name:"Ratio",def:3,max:9,disp:1},
    {name:"Level",def:100,max:150},
    {name:"ATTCK",def:0,max:9,disp:1}
  ]},
  0x00600002:{name:"OptComp",group:"COMP",order:103,install:0,param:[
    {name:"Drive",def:7,max:10},
    {name:"Tone",def:54,max:100},
    {name:"Level",def:50,max:150}
  ]},
  0x40000002:{name:"SlowATTCK",group:"COMP",order:104,install:0,param:[
    {name:"Time",def:20,max:49,disp:1},
    {name:"Curve",def:10,max:10},
    {name:"Level",def:100,max:150}
  ]},
  0x40200002:{name:"ZNR",group:"COMP",order:105,install:0,param:[
    {name:"THRSH",def:9,max:24,disp:1},
    {name:"DETCT",def:1,max:1,disp:["GtrIn","EfxIn"]},
    {name:"Level",def:100,max:150}
  ]},
  0x40400002:{name:"NoiseGate",group:"COMP",order:106,install:0,param:[
    {name:"THRSH",def:9,max:24,disp:1},
    {name:"Level",def:100,max:150}
  ]},
  0x40600002:{name:"DirtyGate",group:"COMP",order:107,install:0,param:[
    {name:"THRSH",def:9,max:24,disp:1},
    {name:"Level",def:100,max:150}
  ]},
  0x00000102:{name:"OrangeLim",group:"COMP",order:108,install:0,param:[]},
  0x00200102:{name:"GrayComp",group:"COMP",order:109,install:0,param:[
    {name:"SUSTN",def:63,max:100},
    {name:"OUT",def:88,max:100}
  ]},
  0x00100004:{name:"LineSel",group:"FILTER",order:200,install:0,param:[
    {name:"EFX_L",def:100,max:150},
    {name:"OUT_L",def:100,max:150}
  ]},
  0x00200004:{name:"GraphicEQ",group:"FILTER",order:201,install:0,param:[
    {name:"160Hz",def:12,max:24,disp:-12},
    {name:"400Hz",def:12,max:24,disp:-12},
    {name:"800Hz",def:12,max:24,disp:-12},
    {name:"3.2kHz",def:12,max:24,disp:-12},
    {name:"6.4kHz",def:12,max:24,disp:-12},
    {name:"12kHz",def:12,max:24,disp:-12},
    {name:"Level",def:100,max:150}
  ]},
  0x00400004:{name:"ParaEQ",group:"FILTER",order:202,install:0,param:[
    {name:"Freq1",def:8,max:30,
      disp:["20Hz","25Hz","32Hz","40Hz","50Hz","63Hz","80Hz","100Hz","125Hz","160Hz","200Hz","250Hz","320Hz","400Hz","500Hz","630Hz",
      "800Hz","1.0kHz","1.2kHz","1.6kHz","2.0kHz","2.5kHz","3.2kHz","4.0kHz","5.0kHz","6.3kHz","8.0kHz","10kHz","12kHz","16kHz","20kHz"]},
    {name:"Q1",def:1,max:5,disp:["0.5","1","2","4","8","16"]},
    {name:"Gain1",def:12,max:24,disp:-12},
    {name:"Freq2",def:15,max:30,
      disp:["20Hz","25Hz","32Hz","40Hz","50Hz","63Hz","80Hz","100Hz","125Hz","160Hz","200Hz","250Hz","320Hz","400Hz","500Hz","630Hz",
      "800Hz","1.0kHz","1.2kHz","1.6kHz","2.0kHz","2.5kHz","3.2kHz","4.0kHz","5.0kHz","6.3kHz","8.0kHz","10kHz","12kHz","16kHz","20kHz"]},
    {name:"Q2",def:1,max:5,disp:["0.5","1","2","4","8","16"]},
    {name:"Gain2",def:12,max:24,disp:-12},
    {name:"Level",def:100,max:150}
  ]},
  0x00600004:{name:"Exciter",group:"FILTER",order:203,install:0,param:[
    {name:"Bass",def:0,max:100},
    {name:"Trebl",def:0,max:100},
    {name:"Level",def:100,max:150}
  ]},
  0x40000004:{name:"CombFLTR",group:"FILTER",order:204,install:0,param:[
    {name:"Freq",def:24,max:49,disp:1},
    {name:"Reso",def:15,max:20,disp:-10},
    {name:"Mix",def:30,max:100},
    {name:"HiDMP",def:6,max:10},
    {name:"Level",def:100,max:150}
  ]},
  0x40200004:{name:"AutoWah",group:"FILTER",order:205,install:0,param:[
    {name:"Sense",def:17,max:19,disp:-9},
    {name:"Reso",def:8,max:10},
    {name:"Level",def:100,max:150}
  ]},
  0x40400004:{name:"Resonance",group:"FILTER",order:206,install:0,param:[
    {name:"Sense",def:14,max:19,disp:-9},
    {name:"Reso",def:8,max:10},
    {name:"Level",def:100,max:150}
  ]},
  0x40600004:{name:"Cry",group:"FILTER",order:207,install:0,param:[
    {name:"Range",def:6,max:9,disp:1},
    {name:"Reso",def:8,max:10},
    {name:"Sense",def:16,max:19,disp:-9},
    {name:"Bal",def:100,max:100},
    {name:"Level",def:100,max:150}]},
  0x00000104:{name:"SlowFLTR",group:"FILTER",order:208,install:0,param:[
    {name:"Time",def:20,max:49,disp:1},
    {name:"Curve",def:10,max:10},
    {name:"Level",def:100,max:150},
    {name:"Reso",def:6,max:10},
    {name:"Chara",def:1,max:1,disp:["2Pole","4Pole"]},
    {name:"DRCTN",def:0,max:1,disp:["Open","Close"]}
  ]},
  0x00200104:{name:"M-Filter",group:"FILTER",order:209,install:0,param:[
    {name:"Freq",def:56,max:100},
    {name:"Sense",def:5,max:10},
    {name:"Reso",def:7,max:10},
    {name:"Type",def:2,max:2,disp:["HPF","BPF","LPF"]},
    {name:"Chara",def:1,max:1,disp:["2Pole","4Pole"]},
    {name:"VLCTY",def:0,max:1,disp:["Fast","Slow"]},
    {name:"Bal",def:100,max:100},
    {name:"Level",def:100,max:150}
  ]},
  0x00400104:{name:"Step",group:"FILTER",order:210,install:0,param:[
    {name:"Depth",def:60,max:100},
    {name:"Rate",def:25,max:78},
    {name:"Reso",def:8,max:10},
    {name:"Shape",def:10,max:10},
    {name:"Level",def:100,max:150}
  ]},
  0x00600104:{name:"SeqFLTR",group:"FILTER",order:211,install:0,param:[
    {name:"Step",def:6,max:6,disp:2},
    {name:"PTTRN",def:6,max:7,disp:1},
    {name:"Speed",def:25,max:77,disp:1},
    {name:"Shape",def:10,max:10},
    {name:"Reso",def:10,max:10},
    {name:"Level",def:100,max:150}
  ]},
  0x40000104:{name:"RndmFLTR",group:"FILTER",order:212,install:0,param:[
    {name:"Speed",def:34,max:77,disp:1},
    {name:"Range",def:50,max:100},
    {name:"Reso",def:6,max:10},
    {name:"Type",def:2,max:2,disp:["HPF","BPF","LPF"]},
    {name:"Chara",def:1,max:1,disp:["2Pole","4Pole"]},
    {name:"Bal",def:90,max:100},
    {name:"Level",def:100,max:150}
  ]},
  0x40200104:{name:"fCycle",group:"FILTER",order:213,install:0,param:[
    {name:"Rate",def:5,max:77,disp:1},
    {name:"Wave",def:3,max:3,disp:["Sine","Tri","SawUp","SawDn"]},
    {name:"Level",def:100,max:150},
    {name:"Depth",def:100,max:100},
    {name:"Reso",def:8,max:10}
  ]},
  0x40400104:{name:"St Gt GEQ",group:"FILTER",order:214,install:0,param:[
    {name:"160Hz",def:12,max:24,disp:-12},
    {name:"400Hz",def:12,max:24,disp:-12},
    {name:"800Hz",def:12,max:24,disp:-12},
    {name:"3.2kHz",def:12,max:24,disp:-12},
    {name:"6.4kHz",def:12,max:24,disp:-12},
    {name:"12kHz",def:12,max:24,disp:-12},
    {name:"Level",def:100,max:150}
  ]},
  0x00100006:{name:"Booster",group:"DRIVE",order:300,install:0,param:[
    {name:"Gain",def:80,max:100},
    {name:"Tone",def:50,max:100},
    {name:"Level",def:100,max:150}
  ]},
  0x00200006:{name:"OverDrive",group:"DRIVE",order:301,install:0,param:[
    {name:"Gain",def:60,max:100},
    {name:"Tone",def:50,max:100},
    {name:"Level",def:100,max:150}
  ]},
  0x00400006:{name:"T Scream",group:"DRIVE",order:302,install:0,param:[
    {name:"Gain",def:70,max:100},
    {name:"Tone",def:50,max:100},
    {name:"Level",def:100,max:150}
  ]},
  0x00600006:{name:"Governor",group:"DRIVE",order:303,install:0,param:[
    {name:"Gain",def:60,max:100},
    {name:"Tone",def:50,max:100},
    {name:"Level",def:100,max:150}
  ]},
  0x40000006:{name:"Dist+",group:"DRIVE",order:304,install:0,param:[
    {name:"Gain",def:80,max:100},
    {name:"Tone",def:50,max:100},
    {name:"Level",def:100,max:150}
  ]},
  0x40200006:{name:"Dist 1",group:"DRIVE",order:305,install:0,param:[
    {name:"Gain",def:60,max:100},
    {name:"Tone",def:50,max:100},
    {name:"Level",def:100,max:150}
  ]},
  0x40400006:{name:"Squeak",group:"DRIVE",order:306,install:0,param:[
    {name:"Gain",def:40,max:100},
    {name:"Tone",def:50,max:100},
    {name:"Level",def:100,max:150}
  ]},
  0x40600006:{name:"FuzzSmile",group:"DRIVE",order:307,install:0,param:[
    {name:"Gain",def:70,max:100},
    {name:"Tone",def:50,max:100},
    {name:"Level",def:100,max:150}
  ]},
  0x00000106:{name:"GreatMuff",group:"DRIVE",order:308,install:0,param:[
    {name:"Gain",def:70,max:100},
    {name:"Tone",def:50,max:100},
    {name:"Level",def:100,max:150}
  ]},
  0x00200106:{name:"MetalWRLD",group:"DRIVE",order:309,install:0,param:[
    {name:"Gain",def:60,max:100},
    {name:"Tone",def:50,max:100},
    {name:"Level",def:100,max:150}
  ]},
  0x00400106:{name:"HotBox",group:"DRIVE",order:310,install:0,param:[
    {name:"Gain",def:60,max:100},
    {name:"Tone",def:50,max:100},
    {name:"Level",def:100,max:150}
  ]},
  0x00600106:{name:"Z Clean",group:"DRIVE",order:311,install:0,param:[
    {name:"Gain",def:60,max:100},
    {name:"Tone",def:50,max:100},
    {name:"Level",def:100,max:150}
  ]},
  0x40000106:{name:"Z MP 1",group:"DRIVE",order:312,install:0,param:[
    {name:"Gain",def:60,max:100},
    {name:"Tone",def:50,max:100},
    {name:"Level",def:100,max:150}
  ]},
  0x40200106:{name:"Z Bottom",group:"DRIVE",order:313,install:0,param:[
    {name:"Gain",def:60,max:100},
    {name:"Tone",def:50,max:100},
    {name:"Level",def:100,max:150}
  ]},
  0x40400106:{name:"Z Dream",group:"DRIVE",order:314,install:0,param:[
    {name:"Gain",def:60,max:100},
    {name:"Tone",def:50,max:100},
    {name:"Level",def:100,max:150}
  ]},
  0x40600106:{name:"Z Scream",group:"DRIVE",order:315,install:0,param:[
    {name:"Gain",def:60,max:100},
    {name:"Tone",def:50,max:100},
    {name:"Level",def:100,max:150}
  ]},
  0x00000206:{name:"Z Neos",group:"DRIVE",order:316,install:0,param:[
    {name:"Gain",def:60,max:100},
    {name:"Tone",def:50,max:100},
    {name:"Level",def:100,max:150}
  ]},
  0x00200206:{name:"Z Wild",group:"DRIVE",order:317,install:0,param:[
    {name:"Gain",def:60,max:100},
    {name:"Tone",def:50,max:100},
    {name:"Level",def:100,max:150}
  ]},
  0x00400206:{name:"Lead",group:"DRIVE",order:318,install:0,param:[
    {name:"Gain",def:60,max:100},
    {name:"Tone",def:50,max:100},
    {name:"Level",def:100,max:150}
  ]},
  0x00600206:{name:"ExtremeDS",group:"DRIVE",order:319,install:0,param:[
    {name:"Gain",def:60,max:100},
    {name:"Tone",def:50,max:100},
    {name:"Level",def:100,max:150}
  ]},
  0x40000206:{name:"Aco.Sim",group:"DRIVE",order:320,install:0,param:[
    {name:"Top",def:80,max:100},
    {name:"Body",def:50,max:100},
    {name:"Level",def:100,max:150}
  ]},
  0x40200206:{name:"CentaGold",group:"DRIVE",order:321,install:0,param:[
    {name:"GAIN",def:69,max:100},
    {name:"TRBL",def:56,max:100},
    {name:"OUT",def:43,max:100}
  ]},
  0x40400206:{name:"NYC Muff",group:"DRIVE",order:322,install:0,param:[
    {name:"VOL",def:58,max:100},
    {name:"TONE",def:55,max:100},
    {name:"SUSTN",def:70,max:100}
  ]},
  0x40600206:{name:"TS Drive",group:"DRIVE",order:323,install:0,param:[
    {name:"O.DRV",def:74,max:100},
    {name:"TONE",def:57,max:100},
    {name:"LEVEL",def:82,max:100}
  ]},
  0x00000306:{name:"BG_THRTTL",group:"DRIVE",order:324,install:0,param:[
    {name:"LEVEL",def:54,max:100},
    {name:"LO/HI",def:1,max:1,disp:["LO","HI"]},
    {name:"GAIN",def:78,max:100},
    {name:"MdCut",def:46,max:100},
    {name:"TONE",def:56,max:100},
    {name:"BOOST",def:1,max:1,disp:["OFF","ON"]}
  ]},
  0x00200306:{name:"OctFuzz",group:"DRIVE",order:325,install:0,param:[
    {name:"VOL",def:68,max:100},
    {name:"COLOR",def:1,max:1,disp:["1","2"]},
    {name:"BOOST",def:65,max:100}
  ]},
  0x00400306:{name:"BG GRID",group:"DRIVE",order:326,install:0,param:[
    {name:"LEVEL",def:74,max:100},
    {name:"TONE",def:50,max:100},
    {name:"GAIN",def:68,max:100}
  ]},
  0x00600306:{name:"RedCrunch",group:"DRIVE",order:327,install:0,param:[
    {name:"VOL",def:61,max:100},
    {name:"LO/HI",def:1,max:1,disp:["LO","HI"]},
    {name:"GAIN",def:68,max:100},
    {name:"PRES",def:48,max:100},
    {name:"COMP",def:0,max:2,disp:["1","0","2"]},
    {name:"TONE",def:47,max:100}
  ]},
  0x40000306:{name:"TB MK1.5",group:"DRIVE",order:328,install:0,param:[
    {name:"LEVEL",def:92,max:100},
    {name:"COLOR",def:1,max:1,disp:["1","2"]},
    {name:"ATTCK",def:90,max:100}
  ]},
  0x40200306:{name:"SweetDrv",group:"DRIVE",order:329,install:0,param:[
    {name:"VOL",def:62,max:100},
    {name:"FOCUS",def:67,max:100},
    {name:"DRIVE",def:78,max:100}
  ]},
  0x40600306:{name:"RC Boost",group:"DRIVE",order:330,install:0,param:[
    {name:"GAIN",def:58,max:100},
    {name:"TRBL",def:52,max:100},
    {name:"BASS",def:48,max:100},
    {name:"VOL",def:48,max:100}
  ]},
  0x00200406:{name:"DynmcDrv",group:"DRIVE",order:331,install:0,param:[
    {name:"LEVEL",def:62,max:100},
    {name:"TONE",def:67,max:100},
    {name:"GAIN",def:78,max:100},
    {name:"MODE",def:1,max:1,disp:["COMBO","STACK"]}
  ]},
  0x00100008:{name:"FD COMBO",group:"AMP",order:400,install:0,param:[
    {name:"Gain",def:24,max:100},
    {name:"Tube",def:30,max:100},
    {name:"Level",def:86,max:150},
    {name:"Trebl",def:48,max:100},
    {name:"Middl",def:45,max:100},
    {name:"Bass",def:44,max:100},
    {name:"Prese",def:52,max:100},
    {name:"CAB",def:8,max:[8,16,32,48,64,80,96,112,128,144,160,176,192,208,224,240,256,272,288,304,320,336,0],
      disp:["FD COMBO 2x12","DLX-R 1x12","FD VIBRO 2x10","US BLUES 4x10","VX COMBO 2x12","VX JMI 2x12","BG CRUNCH 1x12","MATCH 30 2x12","CAR DRIVE 1x12","TW ROCK 1x12","TONE CITY 4x12","HW STACK 4x12","TANGERINE 4x12","B-BRKR 2x12","MS CRUNCH 4x12","MS 1959 4x12","MS DRIVE 4x12","BGN DRIVE 4x12","BG DRIVE 4x12","DZ DRIVE 4x12","ALIEN 4x12","REVO-1 4x12","OFF"]},
    {name:"OUT",def:0,max:4,disp:["LINE","COMBO FRONT","STACK FRONT","COMBO POWER AMP","STACK POWER AMP",]}
  ]},
  0x00200008:{name:"DELUXE-R",group:"AMP",order:401,install:0,param:[
    {name:"Gain",def:50,max:100},
    {name:"Tube",def:30,max:100},
    {name:"Level",def:100,max:150},
    {name:"Trebl",def:50,max:100},
    {name:"Middl",def:50,max:100},
    {name:"Bass",def:50,max:100},
    {name:"Prese",def:50,max:100},
    {name:"CAB",def:16,max:[8,16,32,48,64,80,96,112,128,144,160,176,192,208,224,240,256,272,288,304,320,336,0],
      disp:["FD COMBO 2x12","DLX-R 1x12","FD VIBRO 2x10","US BLUES 4x10","VX COMBO 2x12","VX JMI 2x12","BG CRUNCH 1x12","MATCH 30 2x12","CAR DRIVE 1x12","TW ROCK 1x12","TONE CITY 4x12","HW STACK 4x12","TANGERINE 4x12","B-BRKR 2x12","MS CRUNCH 4x12","MS 1959 4x12","MS DRIVE 4x12","BGN DRIVE 4x12","BG DRIVE 4x12","DZ DRIVE 4x12","ALIEN 4x12","REVO-1 4x12","OFF"]},
    {name:"OUT",def:0,max:4,disp:["LINE","COMBO FRONT","STACK FRONT","COMBO POWER AMP","STACK POWER AMP",]}
  ]},
  0x00400008:{name:"FD VIBRO",group:"AMP",order:402,install:0,param:[
    {name:"Gain",def:56,max:100},
    {name:"Tube",def:30,max:100},
    {name:"Level",def:98,max:150},
    {name:"Trebl",def:54,max:100},
    {name:"Middl",def:50,max:100},
    {name:"Bass",def:47,max:100},
    {name:"Prese",def:52,max:100},
    {name:"CAB",def:32,max:[8,16,32,48,64,80,96,112,128,144,160,176,192,208,224,240,256,272,288,304,320,336,0],
      disp:["FD COMBO 2x12","DLX-R 1x12","FD VIBRO 2x10","US BLUES 4x10","VX COMBO 2x12","VX JMI 2x12","BG CRUNCH 1x12","MATCH 30 2x12","CAR DRIVE 1x12","TW ROCK 1x12","TONE CITY 4x12","HW STACK 4x12","TANGERINE 4x12","B-BRKR 2x12","MS CRUNCH 4x12","MS 1959 4x12","MS DRIVE 4x12","BGN DRIVE 4x12","BG DRIVE 4x12","DZ DRIVE 4x12","ALIEN 4x12","REVO-1 4x12","OFF"]},
    {name:"OUT",def:0,max:4,disp:["LINE","COMBO FRONT","STACK FRONT","COMBO POWER AMP","STACK POWER AMP",]}
  ]},
  0x00600008:{name:"US BLUES",group:"AMP",order:403,install:0,param:[
    {name:"Gain",def:59,max:100},
    {name:"Tube",def:30,max:100},
    {name:"Level",def:107,max:150},
    {name:"Trebl",def:46,max:100},
    {name:"Middl",def:50,max:100},
    {name:"Bass",def:48,max:100},
    {name:"Prese",def:58,max:100},
    {name:"CAB",def:48,max:[8,16,32,48,64,80,96,112,128,144,160,176,192,208,224,240,256,272,288,304,320,336,0],
      disp:["FD COMBO 2x12","DLX-R 1x12","FD VIBRO 2x10","US BLUES 4x10","VX COMBO 2x12","VX JMI 2x12","BG CRUNCH 1x12","MATCH 30 2x12","CAR DRIVE 1x12","TW ROCK 1x12","TONE CITY 4x12","HW STACK 4x12","TANGERINE 4x12","B-BRKR 2x12","MS CRUNCH 4x12","MS 1959 4x12","MS DRIVE 4x12","BGN DRIVE 4x12","BG DRIVE 4x12","DZ DRIVE 4x12","ALIEN 4x12","REVO-1 4x12","OFF"]},
    {name:"OUT",def:0,max:4,disp:["LINE","COMBO FRONT","STACK FRONT","COMBO POWER AMP","STACK POWER AMP",]}]},
  0x40000008:{name:"VX COMBO",group:"AMP",order:404,install:0,param:[
    {name:"Gain",def:31,max:100},
    {name:"Tube",def:30,max:100},
    {name:"Level",def:100,max:150},
    {name:"Trebl",def:44,max:100},
    {name:"Middl",def:50,max:100},
    {name:"Bass",def:49,max:100},
    {name:"Prese",def:53,max:100},
    {name:"CAB",def:64,max:[8,16,32,48,64,80,96,112,128,144,160,176,192,208,224,240,256,272,288,304,320,336,0],
      disp:["FD COMBO 2x12","DLX-R 1x12","FD VIBRO 2x10","US BLUES 4x10","VX COMBO 2x12","VX JMI 2x12","BG CRUNCH 1x12","MATCH 30 2x12","CAR DRIVE 1x12","TW ROCK 1x12","TONE CITY 4x12","HW STACK 4x12","TANGERINE 4x12","B-BRKR 2x12","MS CRUNCH 4x12","MS 1959 4x12","MS DRIVE 4x12","BGN DRIVE 4x12","BG DRIVE 4x12","DZ DRIVE 4x12","ALIEN 4x12","REVO-1 4x12","OFF"]},
    {name:"OUT",def:0,max:4,disp:["LINE","COMBO FRONT","STACK FRONT","COMBO POWER AMP","STACK POWER AMP",]}]},
  0x40200008:{name:"VX JMI",group:"AMP",order:405,install:0,param:[
    {name:"Gain",def:50,max:100},
    {name:"Tube",def:30,max:100},
    {name:"Level",def:100,max:150},
    {name:"Trebl",def:50,max:100},
    {name:"Middl",def:50,max:100},
    {name:"Bass",def:50,max:100},
    {name:"Prese",def:50,max:100},
    {name:"CAB",def:80,max:[8,16,32,48,64,80,96,112,128,144,160,176,192,208,224,240,256,272,288,304,320,336,0],disp:[
      "FD COMBO 2x12","DLX-R 1x12","FD VIBRO 2x10","US BLUES 4x10","VX COMBO 2x12","VX JMI 2x12","BG CRUNCH 1x12","MATCH 30 2x12","CAR DRIVE 1x12","TW ROCK 1x12","TONE CITY 4x12","HW STACK 4x12","TANGERINE 4x12","B-BRKR 2x12","MS CRUNCH 4x12","MS 1959 4x12","MS DRIVE 4x12","BGN DRIVE 4x12","BG DRIVE 4x12","DZ DRIVE 4x12","ALIEN 4x12","REVO-1 4x12","OFF"]},
    {name:"OUT",def:0,max:4,disp:[
      "LINE","COMBO FRONT","STACK FRONT","COMBO POWER AMP","STACK POWER AMP",]}]},
  0x40400008:{name:"BG CRUNCH",group:"AMP",order:406,install:0,param:[
    {name:"Gain",def:57,max:100},
    {name:"Tube",def:30,max:100},
    {name:"Level",def:99,max:150},
    {name:"Trebl",def:50,max:100},
    {name:"Middl",def:50,max:100},
    {name:"Bass",def:50,max:100},
    {name:"Prese",def:60,max:100},
    {name:"CAB",def:96,max:[8,16,32,48,64,80,96,112,128,144,160,176,192,208,224,240,256,272,288,304,320,336,0],
      disp:["FD COMBO 2x12","DLX-R 1x12","FD VIBRO 2x10","US BLUES 4x10","VX COMBO 2x12","VX JMI 2x12","BG CRUNCH 1x12","MATCH 30 2x12","CAR DRIVE 1x12","TW ROCK 1x12","TONE CITY 4x12","HW STACK 4x12","TANGERINE 4x12","B-BRKR 2x12","MS CRUNCH 4x12","MS 1959 4x12","MS DRIVE 4x12","BGN DRIVE 4x12","BG DRIVE 4x12","DZ DRIVE 4x12","ALIEN 4x12","REVO-1 4x12","OFF"]},
    {name:"OUT",def:0,max:4,disp:["LINE","COMBO FRONT","STACK FRONT","COMBO POWER AMP","STACK POWER AMP",]}]},
  0x40600008:{name:"MATCH 30",group:"AMP",order:408,install:0,param:[
    {name:"Gain",def:28,max:100},
    {name:"Tube",def:30,max:100},
    {name:"Level",def:100,max:150},
    {name:"Trebl",def:46,max:100},
    {name:"Middl",def:46,max:100},
    {name:"Bass",def:45,max:100},
    {name:"Prese",def:53,max:100},
    {name:"CAB",def:112,max:[8,16,32,48,64,80,96,112,128,144,160,176,192,208,224,240,256,272,288,304,320,336,0],
      disp:["FD COMBO 2x12","DLX-R 1x12","FD VIBRO 2x10","US BLUES 4x10","VX COMBO 2x12","VX JMI 2x12","BG CRUNCH 1x12","MATCH 30 2x12","CAR DRIVE 1x12","TW ROCK 1x12","TONE CITY 4x12","HW STACK 4x12","TANGERINE 4x12","B-BRKR 2x12","MS CRUNCH 4x12","MS 1959 4x12","MS DRIVE 4x12","BGN DRIVE 4x12","BG DRIVE 4x12","DZ DRIVE 4x12","ALIEN 4x12","REVO-1 4x12","OFF"]},
    {name:"OUT",def:0,max:4,disp:["LINE","COMBO FRONT","STACK FRONT","COMBO POWER AMP","STACK POWER AMP",]}]},
  0x00000108:{name:"CAR DRIVE",group:"AMP",order:409,install:0,param:[
    {name:"Gain",def:51,max:100},
    {name:"Tube",def:30,max:100},
    {name:"Level",def:74,max:150},
    {name:"Trebl",def:50,max:100},
    {name:"Middl",def:50,max:100},
    {name:"Bass",def:50,max:100},
    {name:"Prese",def:50,max:100},
    {name:"CAB",def:128,max:[8,16,32,48,64,80,96,112,128,144,160,176,192,208,224,240,256,272,288,304,320,336,0],
      disp:["FD COMBO 2x12","DLX-R 1x12","FD VIBRO 2x10","US BLUES 4x10","VX COMBO 2x12","VX JMI 2x12","BG CRUNCH 1x12","MATCH 30 2x12","CAR DRIVE 1x12","TW ROCK 1x12","TONE CITY 4x12","HW STACK 4x12","TANGERINE 4x12","B-BRKR 2x12","MS CRUNCH 4x12","MS 1959 4x12","MS DRIVE 4x12","BGN DRIVE 4x12","BG DRIVE 4x12","DZ DRIVE 4x12","ALIEN 4x12","REVO-1 4x12","OFF"]},
    {name:"OUT",def:0,max:4,disp:["LINE","COMBO FRONT","STACK FRONT","COMBO POWER AMP","STACK POWER AMP",]}]},
  0x00200108:{name:"TW ROCK",group:"AMP",order:410,install:0,param:[
    {name:"Gain",def:53,max:100},
    {name:"Tube",def:30,max:100},
    {name:"Level",def:95,max:150},
    {name:"Trebl",def:50,max:100},
    {name:"Middl",def:50,max:100},
    {name:"Bass",def:51,max:100},
    {name:"Prese",def:50,max:100},
    {name:"CAB",def:144,max:[8,16,32,48,64,80,96,112,128,144,160,176,192,208,224,240,256,272,288,304,320,336,0],
      disp:["FD COMBO 2x12","DLX-R 1x12","FD VIBRO 2x10","US BLUES 4x10","VX COMBO 2x12","VX JMI 2x12","BG CRUNCH 1x12","MATCH 30 2x12","CAR DRIVE 1x12","TW ROCK 1x12","TONE CITY 4x12","HW STACK 4x12","TANGERINE 4x12","B-BRKR 2x12","MS CRUNCH 4x12","MS 1959 4x12","MS DRIVE 4x12","BGN DRIVE 4x12","BG DRIVE 4x12","DZ DRIVE 4x12","ALIEN 4x12","REVO-1 4x12","OFF"]},
    {name:"OUT",def:0,max:4,disp:["LINE","COMBO FRONT","STACK FRONT","COMBO POWER AMP","STACK POWER AMP",]}]},
  0x00400108:{name:"TONE CITY",group:"AMP",order:411,install:0,param:[
    {name:"Gain",def:78,max:100},
    {name:"Tube",def:30,max:100},
    {name:"Level",def:89,max:150},
    {name:"Trebl",def:54,max:100},
    {name:"Middl",def:50,max:100},
    {name:"Bass",def:46,max:100},
    {name:"Prese",def:52,max:100},
    {name:"CAB",def:160,max:[8,16,32,48,64,80,96,112,128,144,160,176,192,208,224,240,256,272,288,304,320,336,0],
      disp:["FD COMBO 2x12","DLX-R 1x12","FD VIBRO 2x10","US BLUES 4x10","VX COMBO 2x12","VX JMI 2x12","BG CRUNCH 1x12","MATCH 30 2x12","CAR DRIVE 1x12","TW ROCK 1x12","TONE CITY 4x12","HW STACK 4x12","TANGERINE 4x12","B-BRKR 2x12","MS CRUNCH 4x12","MS 1959 4x12","MS DRIVE 4x12","BGN DRIVE 4x12","BG DRIVE 4x12","DZ DRIVE 4x12","ALIEN 4x12","REVO-1 4x12","OFF"]},
    {name:"OUT",def:0,max:4,disp:["LINE","COMBO FRONT","STACK FRONT","COMBO POWER AMP","STACK POWER AMP",]}]},
  0x00600108:{name:"HW STACK",group:"AMP",order:412,install:0,param:[
    {name:"Gain",def:54,max:100},
    {name:"Tube",def:30,max:100},
    {name:"Level",def:106,max:150},
    {name:"Trebl",def:46,max:100},
    {name:"Middl",def:50,max:100},
    {name:"Bass",def:56,max:100},
    {name:"Prese",def:52,max:100},
    {name:"CAB",def:176,max:[8,16,32,48,64,80,96,112,128,144,160,176,192,208,224,240,256,272,288,304,320,336,0],
      disp:["FD COMBO 2x12","DLX-R 1x12","FD VIBRO 2x10","US BLUES 4x10","VX COMBO 2x12","VX JMI 2x12","BG CRUNCH 1x12","MATCH 30 2x12","CAR DRIVE 1x12","TW ROCK 1x12","TONE CITY 4x12","HW STACK 4x12","TANGERINE 4x12","B-BRKR 2x12","MS CRUNCH 4x12","MS 1959 4x12","MS DRIVE 4x12","BGN DRIVE 4x12","BG DRIVE 4x12","DZ DRIVE 4x12","ALIEN 4x12","REVO-1 4x12","OFF"]},
    {name:"OUT",def:0,max:4,disp:["LINE","COMBO FRONT","STACK FRONT","COMBO POWER AMP","STACK POWER AMP",]}]},
  0x40000108:{name:"TANGERINE",group:"AMP",order:413,install:0,param:[
    {name:"Gain",def:70,max:100},
    {name:"Tube",def:30,max:100},
    {name:"Level",def:99,max:150},
    {name:"Trebl",def:52,max:100},
    {name:"Middl",def:50,max:100},
    {name:"Bass",def:45,max:100},
    {name:"Prese",def:50,max:100},
    {name:"CAB",def:192,max:[8,16,32,48,64,80,96,112,128,144,160,176,192,208,224,240,256,272,288,304,320,336,0],
      disp:["FD COMBO 2x12","DLX-R 1x12","FD VIBRO 2x10","US BLUES 4x10","VX COMBO 2x12","VX JMI 2x12","BG CRUNCH 1x12","MATCH 30 2x12","CAR DRIVE 1x12","TW ROCK 1x12","TONE CITY 4x12","HW STACK 4x12","TANGERINE 4x12","B-BRKR 2x12","MS CRUNCH 4x12","MS 1959 4x12","MS DRIVE 4x12","BGN DRIVE 4x12","BG DRIVE 4x12","DZ DRIVE 4x12","ALIEN 4x12","REVO-1 4x12","OFF"]},
    {name:"OUT",def:0,max:4,disp:["LINE","COMBO FRONT","STACK FRONT","COMBO POWER AMP","STACK POWER AMP",]}]},
  0x40200108:{name:"B-BREAKER",group:"AMP",order:414,install:0,param:[
    {name:"Gain",def:61,max:100},
    {name:"Tube",def:31,max:100},
    {name:"Level",def:100,max:150},
    {name:"Trebl",def:50,max:100},
    {name:"Middl",def:50,max:100},
    {name:"Bass",def:52,max:100},
    {name:"Prese",def:51,max:100},
    {name:"CAB",def:208,max:[8,16,32,48,64,80,96,112,128,144,160,176,192,208,224,240,256,272,288,304,320,336,0],
      disp:["FD COMBO 2x12","DLX-R 1x12","FD VIBRO 2x10","US BLUES 4x10","VX COMBO 2x12","VX JMI 2x12","BG CRUNCH 1x12","MATCH 30 2x12","CAR DRIVE 1x12","TW ROCK 1x12","TONE CITY 4x12","HW STACK 4x12","TANGERINE 4x12","B-BRKR 2x12","MS CRUNCH 4x12","MS 1959 4x12","MS DRIVE 4x12","BGN DRIVE 4x12","BG DRIVE 4x12","DZ DRIVE 4x12","ALIEN 4x12","REVO-1 4x12","OFF"]},
    {name:"OUT",def:0,max:4,disp:["LINE","COMBO FRONT","STACK FRONT","COMBO POWER AMP","STACK POWER AMP",]}]},
  0x40400108:{name:"MS CRUNCH",group:"AMP",order:415,install:0,param:[
    {name:"Gain",def:72,max:100},
    {name:"Tube",def:30,max:100},
    {name:"Level",def:98,max:150},
    {name:"Trebl",def:46,max:100},
    {name:"Middl",def:50,max:100},
    {name:"Bass",def:53,max:100},
    {name:"Prese",def:54,max:100},
    {name:"CAB",def:224,max:[8,16,32,48,64,80,96,112,128,144,160,176,192,208,224,240,256,272,288,304,320,336,0],
      disp:["FD COMBO 2x12","DLX-R 1x12","FD VIBRO 2x10","US BLUES 4x10","VX COMBO 2x12","VX JMI 2x12","BG CRUNCH 1x12","MATCH 30 2x12","CAR DRIVE 1x12","TW ROCK 1x12","TONE CITY 4x12","HW STACK 4x12","TANGERINE 4x12","B-BRKR 2x12","MS CRUNCH 4x12","MS 1959 4x12","MS DRIVE 4x12","BGN DRIVE 4x12","BG DRIVE 4x12","DZ DRIVE 4x12","ALIEN 4x12","REVO-1 4x12","OFF"]},
    {name:"OUT",def:0,max:4,disp:["LINE","COMBO FRONT","STACK FRONT","COMBO POWER AMP","STACK POWER AMP",]}]},
  0x40600108:{name:"MS 1959",group:"AMP",order:416,install:0,param:[
    {name:"Gain",def:58,max:100},
    {name:"Tube",def:30,max:100},
    {name:"Level",def:100,max:150},
    {name:"Trebl",def:50,max:100},
    {name:"Middl",def:50,max:100},
    {name:"Bass",def:50,max:100},
    {name:"Prese",def:50,max:100},
    {name:"CAB",def:240,max:[8,16,32,48,64,80,96,112,128,144,160,176,192,208,224,240,256,272,288,304,320,336,0],
      disp:["FD COMBO 2x12","DLX-R 1x12","FD VIBRO 2x10","US BLUES 4x10","VX COMBO 2x12","VX JMI 2x12","BG CRUNCH 1x12","MATCH 30 2x12","CAR DRIVE 1x12","TW ROCK 1x12","TONE CITY 4x12","HW STACK 4x12","TANGERINE 4x12","B-BRKR 2x12","MS CRUNCH 4x12","MS 1959 4x12","MS DRIVE 4x12","BGN DRIVE 4x12","BG DRIVE 4x12","DZ DRIVE 4x12","ALIEN 4x12","REVO-1 4x12","OFF"]},
    {name:"OUT",def:0,max:4,disp:["LINE","COMBO FRONT","STACK FRONT","COMBO POWER AMP","STACK POWER AMP",]}]},
  0x00000208:{name:"MS DRIVE",group:"AMP",order:417,install:0,param:[
    {name:"Gain",def:82,max:100},
    {name:"Tube",def:30,max:100},
    {name:"Level",def:103,max:150},
    {name:"Trebl",def:45,max:100},
    {name:"Middl",def:50,max:100},
    {name:"Bass",def:56,max:100},
    {name:"Prese",def:53,max:100},
    {name:"CAB",def:256,max:[8,16,32,48,64,80,96,112,128,144,160,176,192,208,224,240,256,272,288,304,320,336,0],
      disp:["FD COMBO 2x12","DLX-R 1x12","FD VIBRO 2x10","US BLUES 4x10","VX COMBO 2x12","VX JMI 2x12","BG CRUNCH 1x12","MATCH 30 2x12","CAR DRIVE 1x12","TW ROCK 1x12","TONE CITY 4x12","HW STACK 4x12","TANGERINE 4x12","B-BRKR 2x12","MS CRUNCH 4x12","MS 1959 4x12","MS DRIVE 4x12","BGN DRIVE 4x12","BG DRIVE 4x12","DZ DRIVE 4x12","ALIEN 4x12","REVO-1 4x12","OFF"]},
    {name:"OUT",def:0,max:4,disp:["LINE","COMBO FRONT","STACK FRONT","COMBO POWER AMP","STACK POWER AMP",]}]},
  0x00200208:{name:"BGN DRIVE",group:"AMP",order:418,install:0,param:[
    {name:"Gain",def:84,max:100},
    {name:"Tube",def:30,max:100},
    {name:"Level",def:91,max:150},
    {name:"Trebl",def:52,max:100},
    {name:"Middl",def:50,max:100},
    {name:"Bass",def:49,max:100},
    {name:"Prese",def:50,max:100},
    {name:"CAB",def:272,max:[8,16,32,48,64,80,96,112,128,144,160,176,192,208,224,240,256,272,288,304,320,336,0],
      disp:["FD COMBO 2x12","DLX-R 1x12","FD VIBRO 2x10","US BLUES 4x10","VX COMBO 2x12","VX JMI 2x12","BG CRUNCH 1x12","MATCH 30 2x12","CAR DRIVE 1x12","TW ROCK 1x12","TONE CITY 4x12","HW STACK 4x12","TANGERINE 4x12","B-BRKR 2x12","MS CRUNCH 4x12","MS 1959 4x12","MS DRIVE 4x12","BGN DRIVE 4x12","BG DRIVE 4x12","DZ DRIVE 4x12","ALIEN 4x12","REVO-1 4x12","OFF"]},
    {name:"OUT",def:0,max:4,disp:["LINE","COMBO FRONT","STACK FRONT","COMBO POWER AMP","STACK POWER AMP",]}]},
  0x00400208:{name:"BG DRIVE",group:"AMP",order:419,install:0,param:[
    {name:"Gain",def:47,max:100},
    {name:"Tube",def:30,max:100},
    {name:"Level",def:97,max:150},
    {name:"Trebl",def:48,max:100},
    {name:"Middl",def:50,max:100},
    {name:"Bass",def:52,max:100},
    {name:"Prese",def:48,max:100},
    {name:"CAB",def:288,max:[8,16,32,48,64,80,96,112,128,144,160,176,192,208,224,240,256,272,288,304,320,336,0],
      disp:["FD COMBO 2x12","DLX-R 1x12","FD VIBRO 2x10","US BLUES 4x10","VX COMBO 2x12","VX JMI 2x12","BG CRUNCH 1x12","MATCH 30 2x12","CAR DRIVE 1x12","TW ROCK 1x12","TONE CITY 4x12","HW STACK 4x12","TANGERINE 4x12","B-BRKR 2x12","MS CRUNCH 4x12","MS 1959 4x12","MS DRIVE 4x12","BGN DRIVE 4x12","BG DRIVE 4x12","DZ DRIVE 4x12","ALIEN 4x12","REVO-1 4x12","OFF"]},
    {name:"OUT",def:0,max:4,disp:["LINE","COMBO FRONT","STACK FRONT","COMBO POWER AMP","STACK POWER AMP",]}]},
  0x00600208:{name:"DZ DRIVE",group:"AMP",order:420,install:0,param:[
    {name:"Gain",def:45,max:100},
    {name:"Tube",def:30,max:100},
    {name:"Level",def:93,max:150},
    {name:"Trebl",def:53,max:100},
    {name:"Middl",def:47,max:100},
    {name:"Bass",def:51,max:100},
    {name:"Prese",def:55,max:100},
    {name:"CAB",def:304,max:[8,16,32,48,64,80,96,112,128,144,160,176,192,208,224,240,256,272,288,304,320,336,0],
      disp:["FD COMBO 2x12","DLX-R 1x12","FD VIBRO 2x10","US BLUES 4x10","VX COMBO 2x12","VX JMI 2x12","BG CRUNCH 1x12","MATCH 30 2x12","CAR DRIVE 1x12","TW ROCK 1x12","TONE CITY 4x12","HW STACK 4x12","TANGERINE 4x12","B-BRKR 2x12","MS CRUNCH 4x12","MS 1959 4x12","MS DRIVE 4x12","BGN DRIVE 4x12","BG DRIVE 4x12","DZ DRIVE 4x12","ALIEN 4x12","REVO-1 4x12","OFF"]},
    {name:"OUT",def:0,max:4,disp:["LINE","COMBO FRONT","STACK FRONT","COMBO POWER AMP","STACK POWER AMP",]}]},
  0x40000208:{name:"ALIEN",group:"AMP",order:421,install:0,param:[
    {name:"Gain",def:62,max:100},
    {name:"Tube",def:30,max:100},
    {name:"Level",def:87,max:150},
    {name:"Trebl",def:52,max:100},
    {name:"Middl",def:50,max:100},
    {name:"Bass",def:44,max:100},
    {name:"Prese",def:54,max:100},
    {name:"CAB",def:320,max:[8,16,32,48,64,80,96,112,128,144,160,176,192,208,224,240,256,272,288,304,320,336,0],
      disp:["FD COMBO 2x12","DLX-R 1x12","FD VIBRO 2x10","US BLUES 4x10","VX COMBO 2x12","VX JMI 2x12","BG CRUNCH 1x12","MATCH 30 2x12","CAR DRIVE 1x12","TW ROCK 1x12","TONE CITY 4x12","HW STACK 4x12","TANGERINE 4x12","B-BRKR 2x12","MS CRUNCH 4x12","MS 1959 4x12","MS DRIVE 4x12","BGN DRIVE 4x12","BG DRIVE 4x12","DZ DRIVE 4x12","ALIEN 4x12","REVO-1 4x12","OFF"]},
    {name:"OUT",def:0,max:4,disp:["LINE","COMBO FRONT","STACK FRONT","COMBO POWER AMP","STACK POWER AMP",]}]},
  0x40200208:{name:"REVO-1",group:"AMP",order:422,install:0,param:[
    {name:"Gain",def:64,max:100},
    {name:"Tube",def:30,max:100},
    {name:"Level",def:89,max:150},
    {name:"Trebl",def:50,max:100},
    {name:"Middl",def:50,max:100},
    {name:"Bass",def:51,max:100},
    {name:"Prese",def:51,max:100},
    {name:"CAB",def:336,max:[8,16,32,48,64,80,96,112,128,144,160,176,192,208,224,240,256,272,288,304,320,336,0],
      disp:["FD COMBO 2x12","DLX-R 1x12","FD VIBRO 2x10","US BLUES 4x10","VX COMBO 2x12","VX JMI 2x12","BG CRUNCH 1x12","MATCH 30 2x12","CAR DRIVE 1x12","TW ROCK 1x12","TONE CITY 4x12","HW STACK 4x12","TANGERINE 4x12","B-BRKR 2x12","MS CRUNCH 4x12","MS 1959 4x12","MS DRIVE 4x12","BGN DRIVE 4x12","BG DRIVE 4x12","DZ DRIVE 4x12","ALIEN 4x12","REVO-1 4x12","OFF"]},
    {name:"OUT",def:0,max:4,disp:["LINE","COMBO FRONT","STACK FRONT","COMBO POWER AMP","STACK POWER AMP",]}]},
  0x0010000c:{name:"Tremolo",group:"MOD",order:500,install:0,param:[
    {name:"Depth",def:80,max:100},
    {name:"Rate",def:33,max:78},
    {name:"Level",def:130,max:150},
    {name:"Wave",def:21,max:29,disp:["UP 0","UP 1","UP 2","UP 3","UP 4","UP 5","UP 6","UP 7","UP 8","UP 9",
      "DWN 0","DWN 1","DWN 2","DWN 3","DWN 4","DWN 5","DWN 6","DWN 7","DWN 8","DWN 9",
      "TRI 0","TRI 1","TRI 2","TRI 3","TRI 4","TRI 5","TRI 6","TRI 7","TRI 8","TRI 9"]}]},
  0x0020000c:{name:"DuoTrem",group:"MOD",order:501,install:0,param:[
    {name:"RateA",def:46,max:78},
    {name:"RateB",def:5,max:78},
    {name:"Level",def:100,max:150},
    {name:"DPT_A",def:80,max:100},
    {name:"DPT_B",def:90,max:100},
    {name:"Link",def:0,max:2,disp:["Seri","Para","STR"]},
    {name:"WaveA",def:19,max:29,disp:["UP 0","UP 1","UP 2","UP 3","UP 4","UP 5","UP 6","UP 7","UP 8","UP 9",
      "DWN 0","DWN 1","DWN 2","DWN 3","DWN 4","DWN 5","DWN 6","DWN 7","DWN 8","DWN 9",
      "TRI 0","TRI 1","TRI 2","TRI 3","TRI 4","TRI 5","TRI 6","TRI 7","TRI 8","TRI 9"]},
    {name:"WaveB",def:21,max:29,disp:["UP 0","UP 1","UP 2","UP 3","UP 4","UP 5","UP 6","UP 7","UP 8","UP 9",
      "DWN 0","DWN 1","DWN 2","DWN 3","DWN 4","DWN 5","DWN 6","DWN 7","DWN 8","DWN 9",
      "TRI 0","TRI 1","TRI 2","TRI 3","TRI 4","TRI 5","TRI 6","TRI 7","TRI 8","TRI 9"]},
  ]},
  0x0040000c:{name:"Slicer",group:"MOD",order:502,install:0,param:[
    {name:"PTTRN",def:0,max:19,disp:1},
    {name:"Speed",def:24,max:77,disp:1},
    {name:"Bal",def:100,max:100},
    {name:"THRSH",def:20,max:50},
    {name:"Level",def:130,max:150},
  ]},
  0x0060000c:{name:"Phaser",group:"MOD",order:503,install:0,param:[
    {name:"Rate",def:11,max:77,disp:1},
    {name:"Color",def:3,max:3,disp:["4 STG","8 STG","inv 4","inv 8"]},
    {name:"Level",def:100,max:150},
  ]},
  0x006a000c:{name:"DuoPhase",group:"MOD",order:504,install:0,param:[
    {name:"RateA",def:46,max:77,disp:1},
    {name:"RateB",def:5,max:51,disp:1},
    {name:"Level",def:100,max:150},
    {name:"ResoA",def:0,max:10},
    {name:"ResoB",def:6,max:10},
    {name:"Link",def:0,max:2,disp:["Seri","Para","STR"]},
    {name:"DPT_A",def:36,max:99,disp:1},
    {name:"DPT_B",def:62,max:99,disp:1},
  ]},
  0x0074000c:{name:"WarpPhase",group:"MOD",order:505,install:0,param:[
    {name:"Speed",def:24,max:77,disp:1},
    {name:"Reso",def:7,max:10},
    {name:"Level",def:100,max:150},
    {name:"DRCTN",def:0,max:1,disp:["Go","Back"]},
  ]},
  0x4000000c:{name:"TheVibe",group:"MOD",order:506,install:0,param:[
    {name:"Speed",def:25,max:50},
    {name:"Depth",def:60,max:100},
    {name:"Bias",def:48,max:100},
    {name:"Wave",def:24,max:100},
    {name:"Mode",def:1,max:1,disp:["VIBRT","CHORS"]},
    {name:"Level",def:100,max:150},
  ]},
  0x4060000c:{name:"Chorus",group:"MOD",order:507,install:0,param:[
    {name:"Depth",def:40,max:100},
    {name:"Rate",def:24,max:49,disp:1},
    {name:"Mix",def:50,max:100},
    {name:"Tone",def:7,max:10},
    {name:"Level",def:100,max:150},
  ]},
  0x0000010c:{name:"Detune",group:"MOD",order:508,install:0,param:[
    {name:"Cent",def:35,max:50,disp:-25},
    {name:"PreD",def:0,max:50},
    {name:"Mix",def:52,max:100},
    {name:"Tone",def:8,max:10},
    {name:"Level",def:100,max:150},
  ]},
  0x0020010c:{name:"VintageCE",group:"MOD",order:509,install:0,param:[
    {name:"Comp",def:2,max:9},
    {name:"Rate",def:24,max:49,disp:1},
    {name:"Mix",def:50,max:100},
    {name:"Level",def:100,max:150},
  ]},
  0x0040010c:{name:"StereoCho",group:"MOD",order:510,install:0,param:[
    {name:"Depth",def:80,max:100},
    {name:"Rate",def:29,max:49,disp:1},
    {name:"Mix",def:60,max:100},
    {name:"Tone",def:7,max:10},
    {name:"Level",def:100,max:150},
  ]},
  0x0060010c:{name:"Ensemble",group:"MOD",order:511,install:0,param:[
    {name:"Depth",def:40,max:100},
    {name:"Rate",def:29,max:49,disp:1},
    {name:"Mix",def:60,max:100},
    {name:"Tone",def:8,max:10},
    {name:"Level",def:100,max:150},
  ]},
  0x4020010c:{name:"SuperCho",group:"MOD",order:512,install:0,param:[
    {name:"E.LVL",def:50,max:120},
    {name:"Rate",def:50,max:100},
    {name:"Depth",def:50,max:100},
    {name:"EQ",def:50,max:100},
    {name:"Mode",def:0,max:1,disp:["MONO","STR"]},
  ]},
  0x4030010c:{name:"VinFLNGR",group:"MOD",order:513,install:0,param:[
    {name:"Depth",def:47,max:100},
    {name:"Rate",def:7,max:78},
    {name:"Reso",def:18,max:20,disp:-10},
    {name:"PreD",def:4,max:50},
    {name:"Mix",def:65,max:100},
    {name:"Level",def:100,max:150},
  ]},
  0x4040010c:{name:"Flanger",group:"MOD",order:514,install:0,param:[
    {name:"Depth",def:47,max:100},
    {name:"Rate",def:7,max:78},
    {name:"Reso",def:18,max:20,disp:-10},
    {name:"PreD",def:4,max:50},
    {name:"Mix",def:65,max:100},
    {name:"Level",def:100,max:150},
  ]},
  0x4060010c:{name:"DynaFLNGR",group:"MOD",order:515,install:0,param:[
    {name:"Depth",def:30,max:100},
    {name:"Rate",def:38,max:78},
    {name:"Sense",def:0,max:19,disp:-10},
    {name:"Reso",def:15,max:20,disp:-10},
    {name:"Level",def:100,max:150},
  ]},
  0x0000020c:{name:"Vibrato",group:"MOD",order:516,install:0,param:[
    {name:"Depth",def:40,max:100},
    {name:"Rate",def:30,max:78},
    {name:"Bal",def:72,max:100},
    {name:"Tone",def:7,max:10},
    {name:"Level",def:120,max:150},
  ]},
  0x0020020c:{name:"Octave",group:"MOD",order:517,install:0,param:[
    {name:"Oct1",def:80,max:100},
    {name:"Oct2",def:15,max:100},
    {name:"Dry",def:100,max:100},
    {name:"Chara",def:100,max:100},
    {name:"Tone",def:8,max:10},
    {name:"Level",def:100,max:150},
  ]},
  0x0040020c:{name:"PitchSHFT",group:"MOD",order:518,install:0,param:[
    {name:"Shift",def:19,max:25,disp:-12},
    {name:"Tone",def:7,max:10},
    {name:"Bal",def:40,max:100},
    {name:"Fine",def:25,max:50,disp:-25},
    {name:"Level",def:100,max:150},
  ]},
  0x0060020c:{name:"MonoPitch",group:"MOD",order:519,install:0,param:[
    {name:"Shift",def:0,max:25,disp:-12},
    {name:"Tone",def:6,max:10},
    {name:"Bal",def:50,max:100},
    {name:"Fine",def:25,max:50,disp:-25},
    {name:"Level",def:100,max:150},
  ]},
  0x4000020c:{name:"HPS",group:"MOD",order:520,install:0,param:[
    {name:"Scale",def:6,max:9,disp:-6},
    {name:"Key",def:0,max:11,disp:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]},
    {name:"Mix",def:70,max:100},
    {name:"Tone",def:6,max:10},
    {name:"Level",def:100,max:150},
  ]},
  0x4020020c:{name:"BendCho",group:"MOD",order:521,install:0,param:[
    {name:"Depth",def:40,max:100},
    {name:"Time",def:50,max:50},
    {name:"Bal",def:100,max:100},
    {name:"Mode",def:0,max:1,disp:["Up","Down"]},
    {name:"Tone",def:8,max:10},
    {name:"Level",def:100,max:150},
  ]},
  0x4040020c:{name:"MojoRolle",group:"MOD",order:522,install:0,param:[
    {name:"Depth",def:37,max:100},
    {name:"Speed",def:57,max:128},
    {name:"Rise",def:0,max:100},
    {name:"Mode",def:0,max:2,disp:["Up-Dn","Up","Down"]},
    {name:"Level",def:100,max:150},
  ]},
  0x4060020c:{name:"RingMod",group:"MOD",order:523,install:0,param:[
    {name:"Freq",def:27,max:49,disp:1},
    {name:"Tone",def:10,max:10},
    {name:"Bal",def:50,max:100},
    {name:"Level",def:120,max:150},
  ]},
  0x0000030c:{name:"CE-Cho5",group:"MOD",order:524,install:0,param:[
    {name:"E.LVL",def:100,max:120},
    {name:"RATE",def:31,max:100},
    {name:"DEPTH",def:67,max:100},
    {name:"LOW",def:43,max:100},
    {name:"HIGH",def:50,max:100},
    {name:"MODE",def:0,max:1,disp:["MONO","STR"]},
  ]},
  0x0020030c:{name:"CloneCho",group:"MOD",order:525,install:0,param:[
    {name:"DEPTH",def:1,max:1,disp:["1","2"]},
    {name:"RATE",def:23,max:100},
  ]},
  0x0040030c:{name:"StonePha",group:"MOD",order:526,install:0,param:[
    {name:"COLOR",def:0,max:1,disp:["1","2"]},
    {name:"RATE",def:50,max:100},
  ]},
  0x0060030c:{name:"BF FLG 2",group:"MOD",order:527,install:0,param:[
    {name:"MNL",def:100,max:100},
    {name:"DEPTH",def:80,max:100},
    {name:"RATE",def:30,max:100},
    {name:"RES",def:50,max:100},
  ]},
  0x4000030c:{name:"SilkyCho",group:"MOD",order:528,install:0,param:[
    {name:"LoMix",def:38,max:100},
    {name:"HiMix",def:100,max:100},
    {name:"ChMix",def:50,max:100},
    {name:"LoPit",def:31,max:50,disp:-25},
    {name:"HiPit",def:33,max:50,disp:-25},
    {name:"PreD",def:27,max:50},
    {name:"Rate",def:50,max:100},
    {name:"Depth",def:46,max:100},
    {name:"Tone",def:50,max:100},
  ]},
  0x4020030c:{name:"MirageCho",group:"MOD",order:529,install:0,param:[
    {name:"Depth",def:60,max:100},
    {name:"Rate",def:38,max:100},
    {name:"Mix",def:55,max:100},
    {name:"PreD",def:10,max:19,disp:1},
    {name:"Tone",def:50,max:100},
    {name:"Level",def:100,max:150},
  ]},
  0x4040030c:{name:"CoronaCho",group:"MOD",order:530,install:0,param:[
    {name:"SPEED",def:50,max:100},
    {name:"DEPTH",def:50,max:100},
    {name:"FxLVL",def:65,max:100},
    {name:"TONE",def:75,max:100},
    {name:"DRY",def:1,max:1,disp:["OFF","ON"]},
  ]},
  0x4060030c:{name:"ANA234Cho",group:"MOD",order:531,install:0,param:[
    {name:"LEVEL",def:70,max:100},
    {name:"RATE",def:60,max:100},
    {name:"DEPTH",def:50,max:100},
    {name:"LOW",def:100,max:100},
    {name:"HIGH",def:50,max:100},
    {name:"Mode",def:0,max:1,disp:["MONO","STR"]},
  ]},
  0x0000040c:{name:"CoronaTri",group:"MOD",order:532,install:0,param:[
    {name:"SPEED",def:25,max:100},
    {name:"DEPTH",def:100,max:100},
    {name:"FxLVL",def:100,max:100},
    {name:"TONE",def:100,max:100},
    {name:"DRY",def:1,max:1,disp:["OFF","ON"]},
  ]},
  0x0020000e:{name:"BitCrush",group:"SFX",order:600,install:0,param:[
    {name:"Bit",def:5,max:12,disp:4},
    {name:"SMPL",def:2,max:50},
    {name:"Bal",def:90,max:100},
    {name:"Tone",def:8,max:10},
    {name:"Level",def:100,max:150},
  ]},
  0x0040000e:{name:"Bomber",group:"SFX",order:601,install:0,param:[
    {name:"PTTRN",def:3,max:3,disp:["HndGn","Arm","Bomb","Thndr"]},
    {name:"Deay",def:49,max:99,disp:1},
    {name:"Bal",def:15,max:100},
    {name:"THRSH",def:40,max:50},
    {name:"Power",def:30,max:30},
    {name:"Tone",def:4,max:10},
    {name:"Level",def:100,max:150},
  ]},
  0x0060000e:{name:"MonoSynth",group:"SFX",order:602,install:0,param:[
    {name:"Synth",def:40,max:100},
    {name:"Dry",def:100,max:100},
    {name:"Level",def:100,max:150},
    {name:"Wave",def:2,max:3,disp:["Sine","Tri","SawUp","SawDn"]},
    {name:"Tone",def:8,max:10},
    {name:"Speed",def:0,max:100},
  ]},
  0x4000000e:{name:"Z-Organ",group:"SFX",order:603,install:0,param:[
    {name:"Upper",def:70,max:100},
    {name:"Lower",def:80,max:100},
    {name:"Dry",def:80,max:100},
    {name:"HPF",def:3,max:10},
    {name:"LPF",def:8,max:10},
    {name:"Level",def:100,max:150},
  ]},
  0x4020000e:{name:"AutoPan",group:"SFX",order:604,install:0,param:[
    {name:"Rate",def:5,max:78},
    {name:"Width",def:100,max:100,disp:-50},
    {name:"Level",def:100,max:150},
    {name:"Depth",def:7,max:10},
    {name:"Clip",def:0,max:10},
  ]},
  0x4040000e:{name:"Rt Closet",group:"SFX",order:605,install:0,param:[
    {name:"Bal",def:50,max:100},
    {name:"Mode",def:0,max:1,disp:["Slow","Fast"]},
    {name:"Level",def:100,max:150},
    {name:"Drive",def:20,max:100},
  ]},
  0x00100010:{name:"Delay",group:"DELAY",order:700,install:0,param:[
    {name:"Time",def:559,max:4022,disp:1},
    {name:"F.B",def:30,max:100},
    {name:"Mix",def:70,max:100},
    {name:"HiDMP",def:10,max:10},
    {name:"P-P",def:0,max:1,disp:["MONO","P-P"]},
    {name:"Level",def:100,max:150},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x00200010:{name:"TapeEcho",group:"DELAY",order:701,install:0,param:[
    {name:"Time",def:559,max:2014,disp:1},
    {name:"F.B",def:64,max:100},
    {name:"Mix",def:56,max:100},
    {name:"HiDMP",def:5,max:10},
    {name:"Level",def:100,max:150},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x00400010:{name:"ModDelay",group:"DELAY",order:702,install:0,param:[
    {name:"Time",def:499,max:2014,disp:1},
    {name:"F.B",def:50,max:100},
    {name:"Mix",def:62,max:100},
    {name:"Rate",def:20,max:49,disp:1},
    {name:"Level",def:100,max:150},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x00600010:{name:"AnalogDly",group:"DELAY",order:703,install:0,param:[
    {name:"Time",def:359,max:4022,disp:1},
    {name:"F.B",def:28,max:100},
    {name:"Mix",def:40,max:100},
    {name:"HiDMP",def:8,max:10},
    {name:"P-P",def:0,max:1,disp:["MONO","P-P"]},
    {name:"Level",def:100,max:150},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x40000010:{name:"ReverseDL",group:"DELAY",order:704,install:0,param:[
    {name:"Time",def:990,max:2005,disp:10},
    {name:"F.B",def:20,max:100},
    {name:"Bal",def:50,max:100},
    {name:"HiDMP",def:8,max:10},
    {name:"Level",def:100,max:150},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x40200010:{name:"MultiTapD",group:"DELAY",order:705,install:0,param:[
    {name:"Time",def:2999,max:3018,disp:1},
    {name:"PTTRN",def:1,max:7,disp:1},
    {name:"Mix",def:20,max:100},
    {name:"Tone",def:10,max:10},
    {name:"Level",def:100,max:150},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x40400010:{name:"DynaDelay",group:"DELAY",order:706,install:0,param:[
    {name:"Time",def:359,max:2014,disp:1},
    {name:"Sense",def:5,max:19,disp:["-10","-9","-8","-7","-6","-5","-4","-3","-2","-1","1","2","3","4","5","6","7","8","9","10"]},
    {name:"Mix",def:80,max:100},
    {name:"F.B",def:30,max:100},
    {name:"Level",def:100,max:150},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x40600010:{name:"FilterDly",group:"DELAY",order:707,install:0,param:[
    {name:"Time",def:499,max:2014,disp:1},
    {name:"F.B",def:50,max:100},
    {name:"Mix",def:90,max:100},
    {name:"Rate",def:6,max:49,disp:1},
    {name:"Depth",def:100,max:100},
    {name:"Reso",def:8,max:10},
    {name:"Level",def:100,max:150},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x00000110:{name:"PitchDly",group:"DELAY",order:708,install:0,param:[
    {name:"Time",def:89,max:1999,disp:1},
    {name:"Pitch",def:21,max:30,disp:[
      "-12","-11","-10","-9","-8","-7","-6","-5","-4","-3","-2","-1",
      "-0.15","-0.10","-0.05","0","0.05","0.10","0.15",
      "1","2","3","4","5","6","7","8","9","10","11","12"
    ]},
    {name:"Mix",def:80,max:100},
    {name:"F.B",def:80,max:100},
    {name:"Tone",def:8,max:10},
    {name:"Level",def:100,max:150},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x00200110:{name:"StereoDly",group:"DELAY",order:709,install:0,param:[
    {name:"TimeL",def:164,max:2014,disp:1},
    {name:"TimeR",def:504,max:2014,disp:1},
    {name:"Mix",def:100,max:100},
    {name:"LchFB",def:55,max:100},
    {name:"RchFB",def:37,max:100},
    {name:"Level",def:100,max:150},
    {name:"LchLv",def:100,max:100},
    {name:"RchLv",def:100,max:100},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x00400110:{name:"PhaseDly",group:"DELAY",order:710,install:0,param:[
    {name:"Time",def:499,max:2014,disp:1},
    {name:"F.B",def:28,max:100},
    {name:"Mix",def:57,max:100},
    {name:"Rate",def:49,max:49,disp:1},
    {name:"Color",def:3,max:3,disp:["4 STG","8 STG","inv 4","inv 8"]},
    {name:"Level",def:100,max:150},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x00600110:{name:"TrgHldDly",group:"DELAY",order:711,install:0,param:[
    {name:"Time",def:40,max:990,disp:10},
    {name:"Duty",def:75,max:75,disp:25},
    {name:"Mix",def:100,max:100},
    {name:"THRSH",def:20,max:30},
    {name:"Level",def:100,max:150},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x40000110:{name:"StompDly",group:"DELAY",order:712,install:0,param:[
    {name:"E.LVL",def:30,max:120},
    {name:"F.B",def:20,max:100},
    {name:"Time",def:359,max:599,disp:1},
    {name:"Sync",def:0,max:15,disp:["OFF","1/16","1/12","3/32","1/8","1/6","3/16","1/4","3/8","1/2","3/4","4/4","5/4","6/4","7/4","8/4"]},
    {name:"Mode",def:0,max:1,disp:["MONO","STR"]},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
    {name:"HiDMP",def:5,max:10},
  ]},
  0x40200110:{name:"TapeEcho3",group:"DELAY",order:713,install:0,param:[
    {name:"F.B",def:20,max:100},
    {name:"MIX",def:50,max:100},
    {name:"TIME",def:350,max:990,disp:10},
    {name:"RecLv",def:50,max:100},
    {name:"SYNC",def:0,max:15,disp:["OFF","1/16","1/12","3/32","1/8","1/6","3/16","1/4","3/8","1/2","3/4","4/4","5/4","6/4","7/4","8/4"]},
    {name:"P-Amp",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x40400110:{name:"DualDigiD",group:"DELAY",order:714,install:0,param:[
    {name:"TimeA",def:500,max:2005},
    {name:"TimeB",def:375,max:2005},
    {name:"FdbkA",def:50,max:110},
    {name:"FdbkB",def:50,max:110},
    {name:"Depth",def:0,max:101},
    {name:"Speed",def:25,max:50},
    {name:"FLTR",def:100,max:200,disp:-100},
    {name:"DlyMx",def:25,max:100},
    {name:"Mix",def:50,max:100},
  ]},
  0x40600110:{name:"CarbonDly",group:"DELAY",order:715,install:0,param:[
    {name:"DELAY",def:387,max:562,disp:19},
    {name:"REGEN",def:47,max:100},
    {name:"MIX",def:69,max:100},
    {name:"MID",def:1,max:1,disp:["OFF","ON"]},
    {name:"WIDTH",def:31,max:50},
    {name:"SPEED",def:28,max:50},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
    {name:"Sync",def:0,max:15,disp:["OFF","1/16","1/12","3/32","1/8","1/6","3/16","1/4","3/8","1/2","3/4","4/4","5/4","6/4","7/4","8/4"]},
  ]},
  0x00000210:{name:"DriveEcho",group:"DELAY",order:716,install:0,param:[
    {name:"DRIVE",def:39,max:100},
    {name:"MIX",def:80,max:100},
    {name:"TIME",def:355,max:1985,disp:20},
    {name:"F.B",def:70,max:100},
    {name:"WOW",def:25,max:100},
    {name:"DRV",def:0,max:1,disp:["DRIV","THRU"]},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
    {name:"Mode",def:0,max:1,disp:["MONO","STR"]},
  ]},
  0x00200210:{name:"SlapBackD",group:"DELAY",order:717,install:0,param:[
    {name:"TIME",def:98,max:300,disp:1},
    {name:"SubDv",def:0,max:2,disp:["1/4","3/16","P-P"]},
    {name:"F.B",def:29,max:100},
    {name:"FxLVL",def:40,max:100},
    {name:"DRY",def:1,max:1,disp:["OFF","ON"]},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
    {name:"Mode",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x00400210:{name:"SmoothDly",group:"DELAY",order:718,install:0,param:[
    {name:"TIME",def:322,max:3014,disp:1},
    {name:"F.B",def:39,max:100},
    {name:"E.LVL",def:49,max:100},
    {name:"TONE",def:83,max:100},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x00600210:{name:"LO-FI Dly",group:"DELAY",order:719,install:0,param:[
    {name:"TIME",def:248,max:1913,disp:2},
    {name:"F.B",def:25,max:100},
    {name:"MIX",def:50,max:100},
    {name:"SMPL",def:5,max:14,disp:["1/128","1/64","1/32","1/24","1/12","1/10","1/9","1/8","1/7","1/6","1/5","1/4","1/3","1/2","1/1"]},
    {name:"BITS",def:10,max:20,disp:["4","4.5","5","5.5","6","6.5","7","7.5","8","9","10","11","12","13","14","15","16","18","20","24","32"]},
    {name:"BLEND",def:60,max:100},
    {name:"DAMP",def:0,max:10},
    {name:"FLT",def:2,max:8,disp:["OFF","1","2","3","4","5","6","7","8"]},
    {name:"VINYL",def:0,max:18,disp:["OFF","D:1","D:2","D:3","D:4","D:5","D:6","D:7","D:8","D:9","S:1","S:2","S:3","S:4","S:5","S:6","S:7","S:8","S:9"]},
  ]},
  0x40000210:{name:"SlwAtkDly",group:"DELAY",order:720,install:0,param:[
    {name:"TIME",def:489,max:1914,disp:1},
    {name:"F.B",def:71,max:100},
    {name:"MIX",def:64,max:100},
    {name:"DEPTH",def:77,max:100},
    {name:"SWELL",def:24,max:49,disp:1},
    {name:"Mode",def:0,max:1,disp:["MONO","STR"]},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x40200210:{name:"TremDelay",group:"DELAY",order:721,install:0,param:[
    {name:"TIME",def:300,max:1855,disp:60},
    {name:"F.B",def:70,max:100},
    {name:"MIX",def:60,max:100},
    {name:"LFO",def:0,max:4,disp:["TRI","SQR","SIN","RAMP","SAW"]},
    {name:"DEPTH",def:100,max:100},
    {name:"SPEED",def:19,max:34,disp:["1/32","1/24","1/18","1/16","1/12","1/10","1/9","1/8","1/7","1/6","1/5","1/4","1/3","1/2","2/3","3/4",
        "1/1","4/3","3/2","2/1","5/2","3/1","7/2","4/1","5/1","6/1","7/1","8/1","9/1","10/1","12/1","16/1","18/1","24/1","32/1"]},
    {name:"DAMP",def:4,max:10},
    {name:"HPF",def:4,max:20,disp:[
      "OFF","20","40","60","80","100","120","140","160","180","200","230","260","300","350","400","500","600","700","800","900"]},
    {name:"GRIT",def:2,max:10},
  ]},
  0x40400210:{name:"FLTR PPD",group:"DELAY",order:722,install:0,param:[
    {name:"TimeA",def:500,max:1915},
    {name:"TimeB",def:250,max:1915},
    {name:"Mix",def:50,max:100},
    {name:"DlyMx",def:25,max:100},
    {name:"Fdbk",def:75,max:110},
    {name:"Slur",def:3,max:10},
    {name:"FLTR",def:80,max:100},
    {name:"Depth",def:8,max:21},
    {name:"Wave",def:35,max:47},
  ]},
  0x40600210:{name:"A-Pan DLY",group:"DELAY",order:723,install:0,param:[
    {name:"Time",def:222,max:2014,disp:1},
    {name:"F.B",def:87,max:100},
    {name:"Mix",def:53,max:100},
    {name:"Rate",def:26,max:52,disp:-2},
    {name:"Width",def:0,max:100,disp:-50},
    {name:"Depth",def:7,max:10},
    {name:"Clip",def:0,max:10},
    {name:"Link",def:1,max:1,disp:["P-D","D-P"]},
    {name:"Level",def:100,max:200},
  ]},
  0x00000310:{name:"ICE Delay",group:"DELAY",order:724,install:0,param:[
    {name:"TIME",def:440,max:1255,disp:60},
    {name:"F.B",def:64,max:100},
    {name:"MIX",def:60,max:100},
    {name:"INTVL",def:23,max:30,disp:[
      "-Oct","-M7","-m7","-M6","-m6","-P5","-Tri","-P4","-M3","-m3","-M2","-m2","-50c","-25c","Uni",
      "+25c","+50c","+m2","+M2","+m3","+M3","+P4","+Tri","+P5","+m6","+M6","+m7","+M7","+Oct","Oc+5","2Oct"]},
    {name:"SLICE",def:1,max:1,disp:["SHORT","LONG"]},
    {name:"BLEND",def:12,max:20},
    {name:"SMEAR",def:7,max:20},
    {name:"DAMP",def:2,max:10},
    {name:"HPF",def:1,max:20,disp:[
      "OFF","20","40","60","80","100","120","140","160","180","200","230","260","300","350","400","500","600","700","800","900"]},
  ]},
  0x00100012:{name:"HD Hall",group:"REVERB",order:800,install:0,param:[
    {name:"PreD",def:80,max:199,disp:1},
    {name:"Decay",def:45,max:100},
    {name:"Mix",def:62,max:100},
    {name:"LoDMP",def:32,max:100},
    {name:"HiDMP",def:70,max:100},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x00180012:{name:"HD Reverb",group:"REVERB",order:801,install:0,param:[
    {name:"Decay",def:10,max:100},
    {name:"Tone",def:7,max:10},
    {name:"Mix",def:46,max:100},
    {name:"PreD",def:53,max:199,disp:1},
    {name:"HPF",def:7,max:10},
    {name:"Level",def:100,max:150},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x00200012:{name:"Hall",group:"REVERB",order:802,install:0,param:[
    {name:"Decay",def:9,max:29,disp:1},
    {name:"Tone",def:5,max:10},
    {name:"Mix",def:46,max:100},
    {name:"PreD",def:48,max:99,disp:1},
    {name:"Level",def:100,max:150},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x00400012:{name:"Room",group:"REVERB",order:803,install:0,param:[
    {name:"Decay",def:9,max:29,disp:1},
    {name:"Tone",def:8,max:10},
    {name:"Mix",def:60,max:100},
    {name:"PreD",def:4,max:99,disp:1},
    {name:"Level",def:100,max:150},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x00600012:{name:"TiledRoom",group:"REVERB",order:804,install:0,param:[
    {name:"Decay",def:19,max:29,disp:1},
    {name:"Tone",def:4,max:10},
    {name:"Mix",def:46,max:100},
    {name:"PreD",def:9,max:99,disp:1},
    {name:"Level",def:100,max:150},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x40000012:{name:"Spring",group:"REVERB",order:805,install:0,param:[
    {name:"Decay",def:19,max:29,disp:1},
    {name:"Tone",def:8,max:10},
    {name:"Mix",def:50,max:100},
    {name:"PreD",def:0,max:99,disp:1},
    {name:"Level",def:100,max:150},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x40200012:{name:"Arena",group:"REVERB",order:806,install:0,param:[
    {name:"Decay",def:14,max:29,disp:1},
    {name:"Tone",def:7,max:10},
    {name:"Mix",def:56,max:100},
    {name:"PreD",def:89,max:99,disp:1},
    {name:"Level",def:100,max:150},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x40400012:{name:"EarlyRef",group:"REVERB",order:807,install:0,param:[
    {name:"Decay",def:14,max:29,disp:1},
    {name:"Shape",def:20,max:20,disp:-10},
    {name:"Mix",def:50,max:100},
    {name:"Tone",def:6,max:10},
    {name:"Level",def:100,max:150},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x40600012:{name:"Air",group:"REVERB",order:808,install:0,param:[
    {name:"Size",def:19,max:99,disp:1},
    {name:"Tone",def:8,max:10},
    {name:"Mix",def:60,max:100},
    {name:"Ref",def:5,max:10},
    {name:"Level",def:100,max:150},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x00200112:{name:"Plate",group:"REVERB",order:809,install:0,param:[
    {name:"PreD",def:8,max:199,disp:1},
    {name:"Decay",def:52,max:100},
    {name:"Mix",def:44,max:100},
    {name:"Color",def:58,max:100},
    {name:"LoDMP",def:97,max:100},
    {name:"HiDMP",def:95,max:100},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
    {name:"Level",def:100,max:150},
  ]},
  0x00400112:{name:"ModReverb",group:"REVERB",order:810,install:0,param:[
    {name:"Depth",def:38,max:100},
    {name:"Decay",def:19,max:29,disp:1},
    {name:"Mix",def:45,max:100},
    {name:"Rate",def:19,max:49,disp:1},
    {name:"Tone",def:6,max:10},
    {name:"PreD",def:29,max:99,disp:1},
    {name:"Level",def:100,max:150},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x00600112:{name:"SlapBack",group:"REVERB",order:811,install:0,param:[
    {name:"Time",def:379,max:1010,disp:1},
    {name:"Decay",def:9,max:29,disp:1},
    {name:"Mix",def:48,max:100},
    {name:"F.B",def:43,max:100},
    {name:"Tone",def:10,max:10},
    {name:"DRBal",def:70,max:100},
    {name:"Level",def:100,max:150},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x40000112:{name:"Spring63",group:"REVERB",order:812,install:0,param:[
    {name:"DWELL",def:35,max:100},
    {name:"MIXER",def:51,max:100},
    {name:"TONE",def:58,max:100},
    {name:"LEVEL",def:100,max:150},
  ]},
  0x40200112:{name:"Chamber",group:"REVERB",order:813,install:0,param:[
    {name:"Decay",def:50,max:100},
    {name:"Tone",def:73,max:100},
    {name:"Mix",def:48,max:100},
    {name:"PreD",def:24,max:200},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x40400112:{name:"LOFI Rev",group:"REVERB",order:814,install:0,param:[
    {name:"DECAY",def:52,max:100},
    {name:"TONE",def:95,max:100},
    {name:"FxLVL",def:44,max:100},
    {name:"PreD",def:0,max:1,disp:["SHORT","LONG"]},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
    {name:"Dry",def:1,max:1,disp:["OFF","ON"]},
  ]},
  0x40600112:{name:"Church",group:"REVERB",order:815,install:0,param:[
    {name:"DECAY",def:49,max:100},
    {name:"PreD",def:96,max:200},
    {name:"MIX",def:46,max:100},
    {name:"TONE",def:61,max:100},
    {name:"HiDMP",def:83,max:100},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
    {name:"Dry",def:1,max:1,disp:["OFF","ON"]},
  ]},
  0x00000212:{name:"Cave",group:"REVERB",order:816,install:0,param:[
    {name:"Decay",def:52,max:100},
    {name:"Tone",def:54,max:100},
    {name:"Mix",def:40,max:100},
    {name:"PreD",def:62,max:200},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x00200212:{name:"Ambience",group:"REVERB",order:817,install:0,param:[
    {name:"DECAY",def:70,max:100},
    {name:"TONE",def:80,max:100},
    {name:"MIX",def:50,max:100},
    {name:"PreD",def:29,max:200},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
    {name:"Dry",def:1,max:1,disp:["OFF","ON"]},
  ]},
  0x00400212:{name:"GateRev",group:"REVERB",order:818,install:0,param:[
    {name:"Level",def:60,max:100},
    {name:"Tone",def:50,max:100},
    {name:"Decay",def:55,max:100},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
    {name:"Dry",def:1,max:1,disp:["OFF","ON"]},
  ]},
  0x00600212:{name:"ReverseRv",group:"REVERB",order:819,install:0,param:[
    {name:"Level",def:100,max:100},
    {name:"Tone",def:70,max:100},
    {name:"Decay",def:100,max:100},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
    {name:"Dry",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x40000212:{name:"Echo",group:"REVERB",order:820,install:0,param:[
    {name:"DECAY",def:25,max:100},
    {name:"TIME",def:125,max:200},
    {name:"TONE",def:70,max:100},
    {name:"MIX",def:80,max:100},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
    {name:"Mode",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x40200212:{name:"TremoloRv",group:"REVERB",order:821,install:0,param:[
    {name:"Decay",def:50,max:100},
    {name:"PDLY",def:70,max:500},
    {name:"Mix",def:45,max:100},
    {name:"Speed",def:28,max:346,disp:10},
    {name:"Shape",def:0,max:5,disp:["SINE","TRI","PEAK","RNDM","RAMP","SQR"]},
    {name:"Depth",def:199,max:200,disp:0},
    {name:"Size",def:50,max:100},
    {name:"Low",def:100,max:200,disp:-100},
    {name:"High",def:100,max:200,disp:-100},
  ]},
  0x40400212:{name:"HolyFLERB",group:"REVERB",order:822,install:0,param:[
    {name:"RVRB",def:50,max:100},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x40600212:{name:"DynaRev",group:"REVERB",order:823,install:0,param:[
    {name:"Decay",def:82,max:100},
    {name:"PreD",def:0,max:100},
    {name:"Color",def:76,max:100},
    {name:"Sense",def:172,max:200,disp:-100},
    {name:"Mix",def:40,max:100},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x00000312:{name:"ShimmerRv",group:"REVERB",order:824,install:0,param:[
    {name:"PreD",def:39,max:99,disp:1},
    {name:"DECAY",def:90,max:100},
    {name:"MIX",def:50,max:100},
    {name:"LoDMP",def:50,max:100},
    {name:"HiDMP",def:74,max:100},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x00200312:{name:"ParticleR",group:"REVERB",order:825,install:0,param:[
    {name:"DWELL",def:40,max:100},
    {name:"GAIN",def:100,max:100},
    {name:"MODE",def:0,max:2,disp:["STBL","CRTCL","HZD"]},
    {name:"MIX",def:60,max:100},
    {name:"MONO",def:0,max:1,disp:["OFF","ON"]},
    {name:"Tail",def:0,max:1,disp:["OFF","ON"]},
  ]},
  0x00400312:{name:"SpaceHole",group:"REVERB",order:826,install:0,param:[
    {name:"Decay",def:50,max:200,disp:-100},
    {name:"PDLY",def:80,max:1000},
    {name:"Mix",def:40,max:100},
    {name:"F.B",def:45,max:100},
    {name:"Depth",def:58,max:100},
    {name:"Speed",def:39,max:100},
    {name:"Size",def:29,max:100},
    {name:"Low",def:87,max:200,disp:-100},
    {name:"High",def:82,max:200,disp:-100},
  ]},
  0x00600312:{name:"MangledSp",group:"REVERB",order:827,install:0,param:[
    {name:"PDLY",def:80,max:500},
    {name:"Clip",def:50,max:100},
    {name:"Mix",def:38,max:100},
    {name:"Decay",def:50,max:100},
    {name:"Mod",def:50,max:100},
    {name:"Size",def:50,max:100},
    {name:"Low",def:97,max:200,disp:-100},
    {name:"High",def:101,max:200,disp:-100},
    {name:"Level",def:85,max:200},
  ]},
  0x40000312:{name:"DualRev",group:"REVERB",order:828,install:0,param:[
    {name:"PDlyA",def:350,max:750},
    {name:"PDlyB",def:700,max:750},
    {name:"Mix",def:30,max:100},
    {name:"ABMix",def:14,max:18,disp:[
      "A9B0","A9B1","A9B2","A9B3","A9B4","A9B5","A9B6","A9B7","A9B8","A9B9",
      "A8B9","A7B9","A6B9","A5B9","A4B9","A3B9","A2B9","A1B9","A0B9"]},
    {name:"DCY A",def:15,max:100},
    {name:"DCY B",def:30,max:100},
    {name:"Size",def:21,max:32,disp:[
      "A1B1","A2B1","A3B1","A4B1","A5B1","A6B1","A7B1","A8B1","A9B1",
      "A9B2","A9B3","A9B4","A9B5","A9B6","A9B7","A9B8","A9B9",
      "A8B9","A7B9","A6B9","A5B9","A4B9","A3B9","A2B9","A1B9",
      "A1B8","A1B7","A1B6","A1B5","A1B4","A1B3","A1B2","A1B1",
    ]},
    {name:"ToneA",def:100,max:200,disp:-100},
    {name:"ToneB",def:70,max:200,disp:-100},
  ]},
}

function MidiIf(ma){
  this.midiaccess=ma;
  this.midiout=null;
  this.que=[];
  this.scan=-1;
  this.dump=1;
  this.supress=0;
  this.waitdata=null;
  this.callback=null;
  this.ready=0;
  this.recv=function(ev){
    midirecv=MakeStr(ev.data);
    switch(this.dump){
    case 1:
      if(ev.data[0]>=0xf0)
        console.log(midirecv);
      break;
    case 2:
      console.log(midirecv);
      break;
    }
    if(ev.data[0]==0xc0){
      if(currentpatch!=ev.data[1]){
        SelPatchList(0);
        currentpatch=ev.data[1];
        DispPatch();
        SelPatchList(1);
      }
    }
    var cmd=midirecv.substr(0,2);
    if(midirecv.substr(0,10)=="f052005831"){
      if(ev.data[6]==0)
        SetEffectState(currentpatch,ev.data[5],0);
      if(ev.data[6]>=2){
        var v=(ev.data[7]&0x7f)+((ev.data[8]&0x7f)<<7);
        SetParamVal(currentpatch,ev.data[5],ev.data[6],v);
        DispPatch();
      }
    }
    if(midirecv.substr(0,10)=="f052005828"){
      var name=MakeName(ev.data);
      if(this.scan>=0){
        document.getElementById("scanningmsg").innerHTML="Scanning Patches...("+this.scan+"/50)";
        patches[this.scan++]={name:name,data:ev.data};
        if(this.scan>49){
          this.scan=-1;
          this.ready=1;
          SelectPatch(currentpatch);
          DispPatch();
          document.getElementById("scanning").style.display="none";
          document.getElementById("msg").innerHTML="Ready";
          ready=true;
          for(i=0;i<6;++i){
            var cell=document.getElementById("fnam"+(i+1));
            var cell2=document.getElementById("fnum"+(i+1));
            cell.oncontextmenu=function(ev){
              PopupEffectMenu(ev.target);
              ev.preventDefault();
            };
            cell.onmousedown=function(ev){
              currenteffect=ev.target.id[4]-1;
              UpdateFocus();
            };
            cell.ondblclick=function(ev){
              document.getElementById("effectpanelmsg").innerHTML="Add / Replace Effect";
              document.getElementById("effectpanelbase").style.display="block";
            };
            cell.onclick=function(ev){
              var n=parseInt(ev.target.id[4]);
              SetCurrentEffect(n-1);
              ToggleEffect(n-1);
              ev.preventDefault();
            };
            cell2.onclick=function(ev){
              PopupEffectMenu(ev.target);
              ev.stopPropagation();
              ev.preventDefault();
            };
          }
          for(i=0;i<50;++i){
            for(var ii=0;ii<6;++ii){
              var id=GetEffectId(i,ii);
              if(id){
                effectlist[id].install=1;
                document.getElementById("e_"+id).classList.add("install");
              }
            }
            var cell=document.getElementById((i+1)+"nam");
            var btn=document.getElementById((i+1)+"btn");
            cell.innerHTML=patches[i].name;
            cell.oncontextmenu=function(ev){
              PopupPatchMenu2(ev.target);
              ev.preventDefault();
            };
            cell.onmousedown=function(ev){
              document.getElementById("popuppatch").style.display="none";
              SelectPatch(parseInt(ev.target.id)-1);
            };
            btn.onmousedown=function(ev){
              document.getElementById("popuppatch").style.display="none";
              SelectPatch(parseInt(ev.target.id)-1);
            }
            btn.onclick=btn.oncontextmenu=function(ev){
              PopupPatchMenu2(ev.target);
              ev.stopPropagation();
              ev.preventDefault();
            };
            cell.draggable=true;
            cell.ondragstart=function(ev){
              ev.dataTransfer.setData("text",ev.target.id);
              this.classList.add("drag");
              for(var j=0;j<50;++j){
                var c=document.getElementById((j+1)+"nam");
                c.ondragenter=function(ev){this.classList.add("over");};
                c.ondragleave=function(ev){this.classList.remove("over");};
                c.ondragover=function(ev){ev.preventDefault();};
                c.ondrop=function(ev){
                  this.classList.remove("over");
                  var s=parseInt(event.dataTransfer.getData("text"));
                  var d=parseInt(ev.target.id);
                  if(s!=d){
                    PopupPatchMenu(ev.target);
                    dragtarget=ev.target;
                  }
                  ev.preventDefault();
                };
                c.ondragend=function(ev){
                  this.classList.remove("over");
                  this.classList.remove("drag");
                  for(var jj=0;jj<50;++jj){
                    cc=document.getElementById((jj+1)+"nam");
                    cc.ondragenter=cc.ondragleave=cc.ondragover=cc.ondrop=cc.ondragend=null;
                  }
                };
              }
            };
          }
        }
        else{
          this.que.push([0xc0,this.scan]);
          this.que.push([0xf0,0x52,0,0x58,0x29,0xf7]);
        }
      }
      else{
        patches[currentpatch]={name:name,data:ev.data};
        for(var ii=0;ii<6;++ii){
          var id=GetEffectId(currentpatch,ii);
          if(id){
            effectlist[id].install=1;
            document.getElementById("e_"+id).classList.add("install");
          }
        }
        DispPatch();
      }
    }
    if(this.waitdata){
      if(midirecv.indexOf(this.waitdata)==0){
        this.supress=0;
        this.waitdata=null;
        if(this.callback)
          this.callback();
      }
    }
  };
  this.StartScan=function(){
    console.log("StartScan")
    if(!this.midiout)
      return;
    this.SendDirect([0xb0,0,0]);
    document.getElementById("scanning").style.display="block";
    this.SendDirect([0xf0,0x52,0x00,0x58,0x50,0xf7]);
    this.scan=0;
    this.SendWait([0xf0,0x52,0x00,0x58,0x33,0xf7],"c0",function(){
      this.que.push([0xf0,0x52,0x00,0x58,0x50,0xf7]);
      this.que.push([0xc0,this.scan]);
      this.que.push([0xf0,0x52,0,0x58,0x29,0xf7]);
    }.bind(this));
  };
  this.SendDirect=function(d){
    if(this.midiout)
      this.midiout.send(d);
  };
  this.Send=function(d){
    this.que.push(d);
  };
  this.SendCurrentPatch=function(){
    this.Send(patches[currentpatch].data);
  };
  this.SendCurrentPatchVerify=function(success,fail){
    var o=[];
    for(var i=0;i<6;++i){
      o.push(GetEffectId(currentpatch,i));
    }
    this.SendCurrentPatch();
    setTimeout(function(){
      this.SendWait([0xf0,0x52,0x00,0x58,0x29,0xf7],"f052005828",function(){
        var s="";
        for(var j=0;j<6;++j){
          if(o[j]!=GetEffectId(currentpatch,j)){
            document.getElementById("e_"+o[j]).classList.add("notinstall");
            effectlist[o[j]].install=-1;
            s+="[ "+effectlist[o[j]].name+"]";
          }
        }
        if(success&&s.length==0)
          success(s);
        if(fail&&s.length>0)
          fail(s);
      })
    }.bind(this),200);
  };
  this.SendWait=function(sd,rv,cb){
    this.supress=1;
    this.callback=cb;
    this.waitdata=rv;
    this.SendDirect(sd);
  };
  this.timer=function(){
    if(!this.midiout)
      return;
    if(this.supress){
      console.log("supress")
      return;
    }
    if(this.scan>=0){
      if(this.que.length>0){
        var d=this.que.shift();
        this.SendDirect(d);
      }
      return;
    }
    else if(this.que.length>0){
      var d=this.que.shift();
      this.SendDirect(d);
    }
    else{
      if(this.ready)
        this.SendWait([0xf0,0x52,0x00,0x58,0x33,0xf7],"c0");
    }
  };
  this.PortScan=function(){
    midioutputs=[];
    document.getElementById("midiport").innerHTML="";
    var i=0;
    var outputIterator=this.midiaccess.outputs.values();
    for(var o=outputIterator.next(); !o.done; o=outputIterator.next()) {
        midioutputs[i]=o.value;
        var op=new Option(o.value.name);
        if(o.value.name=="ZOOM MS Series")
          op.selected=true;
        else
          op.disabled=true;
        document.getElementById("midiport").options[i]=op;
        i++;
    }
    var inputIterator=this.midiaccess.inputs.values();
    for(var ip=inputIterator.next(); !ip.done; ip=inputIterator.next()){
      if(ip.value.name==="ZOOM MS Series"){
        ip.value.addEventListener("midimessage",this.recv.bind(this));
      }
    }
  };
  this.SelectPort=function(){
    var idx=document.getElementById("midiport").selectedIndex;
    if(idx>=0 && midioutputs.length>0){
      this.midiout=midioutputs[idx];
      if(this.midiout.name!="ZOOM MS Series")
        this.midiout=null;
    }
  };
  this.PortScan();
  this.SelectPort();
  if(!this.midiout)
    alert("MIDI port is not found.");
  this.timerid=setInterval(this.timer.bind(this),70);
}

function MakeStr(b){
  var str="";
  for(var j=0;j<b.length;++j)
    str+=("00"+b[j].toString(16)).substr(-2);
  return str;
}
function MakeName(b){
  var name="";
  for(var j=0;j<13;++j){
    var c=b[132+j];
    if(c)
      name+=String.fromCharCode(c);
  }
  return name;
}
function MakeBin(s){
  var bin=[];
  for(var j=0;j<s.length;j+=2)
    bin.push(parseInt(s.substr(j,2),16));
  return bin;
}
function Init(){
  var i;
  if(!navigator.requestMIDIAccess){
    alert("This browser does not support Web MIDI API. Please use latest Chrome.");
    return;
  }
  navigator.requestMIDIAccess({sysex:true}).then(
      function(ma){midiif=new MidiIf(ma);},
      function(e){alert("requestMIDIAccess Error");},
    );
  for(var i=0;i<6;++i){
    var ef=document.getElementById("fnam"+(i+1));
    var im=document.getElementById("fimg"+(i+1));
    ef.draggable=true;
    im.draggable=false;
    ef.ondragstart=function(ev){
      ev.dataTransfer.setData("text",ev.target.id);
      this.classList.add("drag");
      for(var j=0;j<6;++j){
        var ef=document.getElementById("fnam"+(j+1));
        ef.ondragend=function(ev){
          this.classList.remove("drag");
          for(var jj=0;jj<6;++jj){
            var dst=document.getElementById("fnam"+(jj+1));
            dst.ondragenter=dst.ondragleave=dst.ondragover=dst.ondrop=null;
          }
        };
        ef.ondragenter=function(ev){
          var d=parseInt(ev.target.id[4])-1;
          if(d>currenteffect)
            this.classList.toggle("overdown");
          else if(d<currenteffect)
            this.classList.toggle("overup");
        };
        ef.ondragleave=function(ev){
          var d=parseInt(ev.target.id[4])-1;
          if(d>currenteffect)
            this.classList.toggle("overdown");
          else if(d<currenteffect)
            this.classList.toggle("overup");
        };
        ef.ondragover=function(ev){
          ev.preventDefault();
        };
        ef.ondrop=function(ev){
          this.classList.remove("overup");
          this.classList.remove("overdown");
          var s=parseInt(event.dataTransfer.getData("text")[4])-1;
          var d=parseInt(ev.target.id[4])-1;
          if(s!=d){
            if(s>d){
              var e=GetEffect(currentpatch,s);
              for(var i=s;i>d;--i)
                SetEffect(currentpatch,i,GetEffect(currentpatch,i-1));
              SetEffect(currentpatch,d,e);
              SetCurrentEffect(d);
              TrimEffectMax();
              midiif.SendCurrentPatch();
            }
            else{
              var e=GetEffect(currentpatch,s);
              for(var i=s;i<d;++i)
                SetEffect(currentpatch,i,GetEffect(currentpatch,i+1));
              SetEffect(currentpatch,d,e);
              SetCurrentEffect(d);
              TrimEffectMax();
              midiif.SendCurrentPatch();
            }
          }
          ev.preventDefault();
        };
      }
    };
    var tab=document.getElementById("effects");
    for(var j=0;j<9;++j){
      var p=tab.rows[i].cells[j+2].childNodes[0];
      var c="f"+(i+1)+"p"+(j+1);
      var k=document.getElementById(c+"k");
      var s=document.getElementById(c+"s");
      p.onclick=function(ev){
        var id=ev.target.id;
        if(id[0]!="f")
          id=ev.target.parentNode.parentNode.id;
        currenteffect=parseInt(id[1])-1;
        currentparam=parseInt(id[3])-1;
        UpdateFocus();
      }
      k.valuetip=0;
      k.onchange = function(k){
        var f=parseInt(k.target.id[1]);
        var p=parseInt(k.target.id[3]);
        SetCurrentEffect(f-1);
        if(k.target.tab){
          var v=k.target.tab[k.target.value|0];
          SetParamVal(currentpatch,f-1,p+1,v);
        }
        else
          SetParamVal(currentpatch,f-1,p+1,k.target.value);
        DispPatch();
        midiif.SendCurrentPatch();
      }
      if(s)
        s.onchange=function(s){
          var f=parseInt(s.target.id[1]);
          var p=parseInt(s.target.id[3]);
          SetCurrentEffect(f-1);
          SetParamVal(currentpatch,f-1,p+1,s.target.value);
          DispPatch();
          midiif.SendCurrentPatch();
        }
    }
  }
  var p=document.getElementById("efpanel0");
  for(var id in effectlist){
    var ef=effectlist[id];
    var e=document.createElement("div");
    e.innerHTML="<img src='./images/"+ef.name.replace(/ /g,"_")+".png' draggable='false'/><div>"+ef.name+"</div>";
    e.setAttribute("class","efitem");
    var div=document.getElementById("ef"+ef.group);
    if(div){
      div.appendChild(e);
      e.id="e_"+id;
      e.onclick=function(ev){
        if(document.getElementById("effectpanelmsg").innerHTML!="Install Check"){
          var id=ev.target.id;
          if(!id)
            id=ev.target.parentNode.id;
          var ef=GetEffectFromId(id.substring(2));
          SetEffect(currentpatch,currenteffect,ef);
          SetCurrentEffect(currenteffect);
          TrimEffectMax();
          EffectPanelCancel();
          midiif.SendCurrentPatchVerify(null,function(s){
            alert("Effect "+s+" is not installed.");
          });
        }
      }
    }
  }
  ShowDoc(GetLang()=="ja"?"ja":"en");
  inst=new InstallChecker();
  document.addEventListener("click",function(ev){
    PopupEffectCancel();
    PopupPatchCancel();
    PopupPatchCancel2();
  });
  document.addEventListener("keydown",function(ev){
    if(ready){
      var p;
      if(document.getElementById("inputpanel").style.display=="block" || document.getElementById("confirmpanel").style.display=="block")
        return;
      if(ev.ctrlKey||ev.altKey)
        return;
      if(ev.key=="ArrowUp"||ev.key=="ArrowDown"||ev.key=="PageUp"||ev.key=="PageDown"){
        if(currenteffect>=0&&currentparam>=0){
          var i="f"+(currenteffect+1)+"p"+(currentparam+1);
          var k=document.getElementById(i+"k");
          var s=document.getElementById(i+"s");
          if(k){
            var p1=Math.max((((k.max-k.min)*0.05)|0),1);
            var p2=Math.max((((k.max-k.min)*0.01)|0),1);
            var v=k.value;
            switch(ev.key){
            case "ArrowUp":
              if(ev.shiftKey)
                v=Math.min(v+=1,k.max);
              else if(ev.ctrlKey)
                v=Math.min(v+=p1,k.max);
              else
                v=Math.min(v+=p2,k.max);
              break;
            case "ArrowDown":
              if(ev.shiftKey)
                v=Math.max(v-=1,k.min);
              else if(ev.ctrlKey)
                v=Math.min(v-=p1,k.min);
              else
                v=Math.max(v-=p2,k.min);
              break;
            case "PageUp":
              v=Math.min(v+=p1,k.max);
              break;
            case "PageDown":
              v=Math.max(v-=p1,k.min);
              break;
            }
            k.setValue(v,true);
          }
        }
      }
      if(ev.key=="ArrowLeft" || ev.key=="ArrowRight"){
        p=currentpatch;
        if(ev.key=="ArrowLeft"){
          if(--p<0)
            p=49;
        }
        else{
          if(++p>=50)
            p=0;
        }
        SelectPatch(p);
        ev.preventDefault();
      }
      var p=patchkeymap.indexOf(ev.key);
      if(p>=0){
        SelectPatch(p);
        ev.preventDefault();
      }
      var e=effectkeymap.indexOf(ev.key);
      if(e>=0){
        SetCurrentEffect(e);
        ToggleEffect(e);
        ev.preventDefault();
      }
    }
  });
}
function Scan(){
  midiif.StartScan();
}
function StateChange(){
  console.log("StateChange");
}
function UpdateFocus(){
  var tab=document.getElementById("effects");
  for(f=0;f<6;++f){
    for(p=0;p<9;++p){
      var cell=tab.rows[f].cells[p+2].childNodes[0];
      if(f==currenteffect&&p==currentparam)
        cell.classList.add("pfocus");
      else
        cell.classList.remove("pfocus");
    }
  }
}
function PopupEffectMenu(tar){
  currenteffect=parseInt(tar.id[4])-1;
  UpdateFocus();
  var rc=tar.getBoundingClientRect();
  var e=document.getElementById("popupeffect");
  e.style.display="block";
  e.style.left=(rc.left+20+window.pageXOffset)+"px";
  e.style.top=(rc.top+20+window.pageYOffset)+"px";
}
function PopupEffectCancel(){
  document.getElementById("popupeffect").style.display="none";
}
function EffectPanelCancel(){
  document.getElementById("effectpanelbase").style.display="none";
}
function PopupEffectDelete(){
  var tar=document.getElementById("fnam"+(currenteffect+1));
  var panel=document.getElementById("confirmpanel");
  document.getElementById("confirmmsg").innerHTML="Delete Effect Unit ?";
  document.getElementById("confirmok").onclick=function(ev){
    for(var j=currenteffect;j<5;++j){
      for(var i=0;i<11;++i){
        SetParamVal(currentpatch,j,i,GetParamVal(currentpatch,j+1,i));
      }
    }
    SetParamVal(currentpatch,5,0,1);
    for(var i=1;i<10;++i)
      SetParamVal(currentpatch,5,i,0);
    TrimEffectMax();
    SetCurrentEffect(currenteffect);
    DispPatch();
    midiif.SendCurrentPatch();
    ev.target.parentNode.style.display="none";
  };
  var rc=tar.getBoundingClientRect();
  panel.style.display="block";
  panel.style.left=(rc.left-20+window.pageXOffset)+"px";
  panel.style.top=(rc.top+40+window.pageYOffset)+"px";
}
function PopupEffectReplace(){
  document.getElementById("effectpanelmsg").innerHTML="Add / Replace Effect";
  document.getElementById("effectpanelbase").style.display="block";
}
function PopupEffectInsert(){
  if(GetEffectId(currentpatch,5)!=0)
    return;
  for(var j=5;j>currenteffect;--j){
    for(var k=0;k<11;++k){
      SetParamVal(currentpatch,j,k,GetParamVal(currentpatch,j-1,k));
    }
  }
  SetParamVal(currentpatch,currenteffect,0,1);
  for(var k=1;k<11;++k)
    SetParamVal(currentpatch,currenteffect,k,0);
  TrimEffectMax();
  DispPatch();
  SetCurrentEffect(currenteffect);
  midiif.SendCurrentPatch();
  PopupEffectCancel();
}
function PopupEffectUp(){
  if(currenteffect>0){
    var e=GetEffect(currentpatch,currenteffect);
    SetEffect(currentpatch,currenteffect,GetEffect(currentpatch,currenteffect-1));
    SetEffect(currentpatch,currenteffect-1,e);
    TrimEffectMax();
    midiif.SendCurrentPatch();
  }
  PopupEffectCancel();
}
function PopupEffectDown(){
  if(currenteffect<5){
    var e=GetEffect(currentpatch,currenteffect);
    SetEffect(currentpatch,currenteffect,GetEffect(currentpatch,currenteffect+1));
    SetEffect(currentpatch,currenteffect+1,e);
    TrimEffectMax();
    midiif.SendCurrentPatch();
  }
  PopupEffectCancel();
}
function PopupPatchMenu2(tar){
  var rc=tar.getBoundingClientRect();
  var e=document.getElementById("popuppatch2");
  e.style.display="block";
  e.style.left=(rc.left+20+window.pageXOffset)+"px";
  e.style.top=(rc.top+20+window.pageYOffset)+"px";
}
function PopupPatchCancel2(){
  document.getElementById("popuppatch2").style.display="none";
}
function PopupPatchMenu(tar){
  var rc=tar.getBoundingClientRect();
  var e=document.getElementById("popuppatch");
  e.style.display="block";
  e.style.left=(rc.left+20+window.pageXOffset)+"px";
  e.style.top=(rc.top+20+window.pageYOffset)+"px";
}
function PopupPatchCancel(){
  var e=document.getElementById("popuppatch");
  e.style.display="none";
  if(dragtarget){
    dragtarget=null;
  }
}
function PopupPatchOverwrite(){
  var e=document.getElementById("popuppatch");
  e.style.display="none";
  clipboard=patches[currentpatch].data.slice(0);
  SelectPatch(parseInt(dragtarget.id)-1);
  PopupPatchPaste();
  dragtarget=null;
}
function PopupPatchExchange(){
  var dst=parseInt(dragtarget.id)-1;
  clipboard=patches[currentpatch].data.slice(0);
  patches[currentpatch].data=patches[dst].data.slice(0);
  patches[currentpatch].name=MakeName(patches[currentpatch].data);
  document.getElementById((currentpatch+1)+"nam").innerHTML=patches[currentpatch].name;
  SendPatch(currentpatch);
  SelectPatch(dst);
  PopupPatchPaste();
  dragtarget=null;
  var e=document.getElementById("popuppatch");
  e.style.display="none";
}
function PopupPatchCopy(){
  clipboard=patches[currentpatch].data.slice(0);
  PopupPatchCancel2();
}
function PopupPatchPaste(){
  if(clipboard){
    patches[currentpatch].data=clipboard.slice(0);
    patches[currentpatch].name=MakeName(clipboard);
    document.getElementById((currentpatch+1)+"nam").innerHTML=patches[currentpatch].name;
    DispPatch();
    midiif.SendCurrentPatch();
  }
  PopupPatchCancel2();
}
function PopupPatchDelete(){
  var tar=document.getElementById((currentpatch+1)+"nam");
  var panel=document.getElementById("confirmpanel");
  document.getElementById("confirmmsg").innerHTML="Delete Patch ?";
  document.getElementById("confirmok").addEventListener("click",
    function(ev){
      patches[currentpatch].data=emptypatch.slice(0);
      patches[currentpatch].name=MakeName(emptypatch);
      document.getElementById((currentpatch+1)+"nam").innerHTML=patches[currentpatch].name;
      DispPatch();
      midiif.SendCurrentPatch();
    }
  );
  var rc=tar.getBoundingClientRect();
  panel.style.display="block";
  panel.style.left=(rc.left-20+window.pageXOffset)+"px";
  panel.style.top=(rc.top+20+window.pageYOffset)+"px";
  PopupPatchCancel2();
}
function PopupPatchRename(){
  document.getElementById("inputtext").value="";
  var tar=document.getElementById((currentpatch+1)+"nam");
  var panel=document.getElementById("inputpanel");
  document.getElementById("inputmsg").innerHTML="Rename Patch";
  var rc=tar.getBoundingClientRect();
  panel.style.display="block";
  panel.style.left=(rc.left-80+window.pageXOffset)+"px";
  panel.style.top=(rc.top+20+window.pageYOffset)+"px";
  PopupPatchCancel2();
  document.getElementById("inputok").onclick=function(ev){
    var i;
    var name=document.getElementById("inputtext").value;
    if(name.length>10)
      name=name.substr(0,10);
    var p=currentpatch;
    patches[p].name=name;
    patches[p].data[132]=name.charCodeAt(0);
    for(i=1;i<=7;++i)
      patches[p].data[133+i]=name.charCodeAt(i);
    for(i=8;i<=9;++i)
      patches[p].data[134+i]=name.charCodeAt(i);
    document.getElementById((p+1)+"nam").innerHTML=name;
    midiif.SendCurrentPatch();
    document.getElementById("inputpanel").style.display="none";
  };
}
function SelectPort(){
  if(midioutputs.length>0){
    midiif.midiout=midioutputs[document.getElementById("midiport").selectedIndex];
    if(midiif.midiout && midiif.midiout.name!="ZOOM MS Series")
      midiif.midiout=null;
  }
}
function GetEffectId(p,n){
  return GetParamVal(p,n,1);
}
var bits=[
  [ //eff0
    [[6,1,0]],  //State
    [[5,0x40,24],[6,0x7e,16],[7,0x07,8],[9,0x1f,0]], //ID
    [[9,0x60,-5],[5,0x8,-1],[10,0x7f,3],[5,0x4,8],[11,0x1,11]],  //Params2-
    [[11,0x7c,-2],[5,0x2,4],[12,0x1f,6]],
    [[5,0x1,0],[14,0x7f,1],[13,0x40,2],[15,0x3,9]],
    [[15,0x70,-4],[13,0x20,-2],[16,0x0f,4]],
    [[16,0x70,-4],[13,0x10,-1],[17,0x0f,4]],
    [[17,0x70,-4],[13,0x08,0],[18,0x0f,4]],
    [[18,0x70,-4],[13,0x04,1],[19,0x0f,4]],
    [[19,0x70,-4],[13,0x02,2],[20,0x1f,4]],
    [[24,0x7f,0],[21,0x10,3]],
  ],
  [ //eff1
    [[26,1,0]], //State
    [[21,0x4,28],[26,0x7e,16],[27,0x07,8],[30,0x1f,0]], //ID
    [[30,0x60,-5],[29,0x40,-4],[31,0x7f,3],[29,0x20,5],[32,0x1,11]],
    [[32,0x7c,-2],[29,0x10,1],[33,0x1f,6]],
    [[29,0x8,-3],[34,0x7f,1],[29,0x4,6],[35,0x3,9]],
    [[35,0x70,-4],[29,0x2,2],[36,0x0f,4]],
    [[36,0x70,-4],[29,0x1,3],[38,0x0f,4]],
    [[38,0x70,-4],[37,0x40,-3],[39,0x0f,4]],
    [[39,0x70,-4],[37,0x20,-2],[40,0x0f,4]],
    [[40,0x70,-4],[37,0x10,-1],[41,0x1f,4]],
    [[44,0x7f,0],[37,0x1,7]],
  ],
  [ //eff2
    [[47,1,0]], //State
    [[45,0x20,25],[47,0x7e,16],[48,0x07,8],[50,0x1f,0]],  //ID
    [[50,0x60,-5],[45,0x4,0],[51,0x7f,3],[45,0x2,9],[52,0x1,11]],
    [[52,0x7c,-2],[45,0x1,5],[54,0x1f,6]],
    [[53,0x40,-6],[55,0x7f,1],[53,0x20,3],[56,0x3,9]],
    [[56,0x70,-4],[53,0x10,-1],[57,0x0f,4]],
    [[57,0x70,-4],[53,0x8,0],[58,0x0f,4]],
    [[58,0x70,-4],[53,0x4,1],[59,0x0f,4]],
    [[59,0x70,-4],[53,0x2,2],[60,0x0f,4]],
    [[60,0x70,-4],[53,0x1,3],[62,0x1f,4]],
    [[65,0x7f,0],[61,0x8,4]],
  ],
  [ //eff3
    [[67,1,0]], //State
    [[61,0x2,29],[67,0x7e,16],[68,0x07,8],[71,0x1f,0]], //ID
    [[71,0x60,-5],[69,0x20,-3],[72,0x7f,3],[69,0x10,6],[73,0x1,11]],
    [[73,0x7c,-2],[69,0x8,2],[74,0x1f,6]],
    [[69,0x4,-2],[75,0x7f,1],[69,0x2,7],[76,0x3,9]],
    [[76,0x70,-4],[69,0x1,3],[78,0x0f,4]],
    [[78,0x70,-4],[77,0x40,-3],[79,0x0f,4]],
    [[79,0x70,-4],[77,0x20,-2],[80,0x0f,4]],
    [[80,0x70,-4],[77,0x10,-1],[81,0x0f,4]],
    [[81,0x70,-4],[77,0x8,0],[82,0x1f,4]],
    [[86,0x7f,0],[85,0x40,1]],
  ],
  [ //eff4
    [[88,1,0]], //State
    [[85,0x10,26],[88,0x7e,16],[89,0x07,8],[91,0x1f,0]],  //ID
    [[91,0x60,-5],[85,0x2,1],[92,0x7f,3],[85,0x1,10],[94,0x1,11]],
    [[94,0x7c,-2],[93,0x40,-1],[95,0x1f,6]],
    [[93,0x20,-5],[96,0x7f,1],[93,0x10,4],[97,0x3,9]],
    [[97,0x70,-4],[93,0x8,0],[98,0x0f,4]],
    [[98,0x70,-4],[93,0x4,1],[99,0x0f,4]],
    [[99,0x70,-4],[93,0x2,2],[100,0x0f,4]],
    [[100,0x70,-4],[93,0x1,3],[102,0x0f,4]],
    [[102,0x70,-4],[101,0x40,-3],[103,0x1f,4]],
    [[106,0x7f,0],[106,0x4,5]],
  ],
  [ //eff5
    [[108,1,0]],  //State
    [[101,0x1,30],[108,0x7e,16],[110,0x07,8],[112,0x1f,0]], //ID
    [[112,0x60,-5],[109,0x10,-2],[113,0x7f,3],[109,0x8,7],[114,0x1,11]],
    [[114,0x7c,-2],[109,0x4,3],[115,0x1f,6]],
    [[109,0x2,-1],[116,0x7f,1],[109,0x1,8],[118,0x3,9]],
    [[118,0x70,-4],[117,0x40,-3],[119,0x0f,4]],
    [[119,0x70,-4],[117,0x20,-2],[120,0x0f,4]],
    [[120,0x70,-4],[117,0x10,-1],[121,0x0f,4]],
    [[121,0x70,-4],[117,0x8,0],[122,0x0f,4]],
    [[122,0x70,-4],[117,0x4,1],[123,0x1f,4]],
    [[127,0x7f,0],[125,0x20,2]],
  ]
];
function GetParamVal(p,n,param){
  var pat=patches[p];
  if(!pat)
    return 0;
  var b=bits[n][param];
  var val=0;
  for(var i=0;i<b.length;++i){
    var b0=b[i];
    var v=pat.data[b0[0]]&b0[1];
    if(b0[2]>=0)
      v<<=b0[2];
    else
      v>>=-b0[2];
    val|=v;
  }
  return val;
}
function SetParamVal(p,n,param,val){
  var pat=patches[p];
  if(!pat)
    return 0;
  var b=bits[n][param];
  for(var i=0;i<b.length;++i){
    var b0=b[i];
    var bb,v;
    if(b0[2]>=0)
      v=val>>b0[2];
    else
      v=val<<-b0[2];
    pat.data[b0[0]]=(pat.data[b0[0]]&~b0[1])+(v&b0[1]);
  }
}
function GetCurrentEffect(){
  var pat=patches[currentpatch];
  if(!pat)
    return 0;
  return 6-(((pat.data[130]&1)<<2)+((pat.data[125]&8)>>2)+((pat.data[129]&0x40)>>6));
}
function SetCurrentEffect(n){
  var pat=patches[currentpatch];
  if(!pat)
    return 0;
  n=5-n;
  pat.data[129]=(pat.data[129]&~0x40)+((n&1)<<6);
  pat.data[125]=(pat.data[125]&~8)+((n&2)<<2);
  pat.data[130]=(pat.data[130]&~1)+((n&4)>>2);
}
function GetEffectMax(){
  var pat=patches[currentpatch];
  if(!pat)
    return 0;
  return (pat.data[130]>>2)&0x7;
}
function SetEffectMax(n){
  var pat=patches[currentpatch];
  if(!pat)
    return 0;
  pat.data[130]=(pat.data[130]&~0x1c)+((n<<2)&0x1c);
}
function TrimEffectMax(){
  var i;
  for(i=5;i>0;--i){
    if(GetEffectId(currentpatch,i)!=0)
      break;
  }
  SetEffectMax(i+1);
}
function GetEffectFromId(id){
  var ef=[];
  var e=effectlist[id];
  id=parseInt(id);
  ef.push(1);
  ef.push(id);
  for(var i=0;i<e.param.length;++i)
    ef.push(e.param[i].def);
  for(;i<9;++i)
    ef.push(0);
  return ef;
}
function GetEffect(p,n){
  var ef=[];
  for(var i=0;i<11;++i)
    ef.push(GetParamVal(p,n,i));
  return ef;
}
function SetEffect(p,n,ef){
  for(var i=0;i<11;++i){
    SetParamVal(p,n,i,ef[i]);
  }
  DispPatch();
}
function GetEffectParams(p,n){
  var r=[];
  for(var i=0;i<9;++i)
    r.push(GetParamVal(p,n,i));
  return r;
}
function GetEffectState(p,n){
  return GetParamVal(p,n,0);
}
function SetEffectState(p,n,on){
  SetParamVal(p,n,0,on?1:0);
  if(p==currentpatch){
    var id=GetEffectId(p,n);
    var ef=effectlist[id];
    var c=document.getElementById("fnam"+(n+1));
    if(ef && id!=0 && on)
      c.classList.add("press");
    else
      c.classList.remove("press");
  }
}
function ToggleEffect(n){
  SetEffectState(currentpatch, n,GetEffectState(currentpatch,n)^1);
  midiif.SendCurrentPatch();
}
function DispPatch(){
  var n,p,cell;
  var tab=document.getElementById("effects");
  for(n=0;n<6;++n){
    var id=GetEffectId(currentpatch,n);
    var ef=effectlist[id];
    var c=document.getElementById("fnam"+(n+1));
    var t=document.getElementById("ftxt"+(n+1));
    var img=document.getElementById("fimg"+(n+1));
    var imgnam=ef.name.replace(/ /g,"_");
    if(img)
      img.src="./images/"+imgnam+".png"
    if(ef)
      t.innerHTML=ef.name;
    else
      t.innerHTML="unknown";
    if(ef && id!=0 && GetEffectState(currentpatch,n))
      c.classList.add("press");
    else
      c.classList.remove("press");
    for(p=0;p<9;++p){
      cell=tab.rows[n].cells[p+1];
      var s="f"+(n+1)+"p"+(p+1);
      var el=document.getElementById(s+"l");
      var ek=document.getElementById(s+"k");
      var es=document.getElementById(s+"s");
      var ev=document.getElementById(s+"v");
      if(p<ef.param.length){
        el.innerHTML=ef.param[p].name;
        ev.style.display="block";
        if(ef.param[p].max==1){
          es.style.display="block";
          ek.style.display="none";
        }
        else{
          es.style.display="none";
          ek.style.display="block";
        }
        var v=GetParamVal(currentpatch,n,p+2);
        if(typeof(ef.param[p].max)=="object"){
          for(var k=ef.param[p].max.length-1;k>=0;--k){
            if(ef.param[p].max[k]==v){
              v=k;
              break;
            }
          }
        }
        var ds=ef.param[p].disp;
        switch(typeof(ds)){
        case "number":
          ev.value=v+ds;
          break;
        case "object":
          ev.value=ds[v];
          break;
        default:
          ev.value=v;
        }
        if(typeof(ef.param[p].max)=="object"){
            ek.max=ef.param[p].max.length-1;
            ek.tab=ef.param[p].max;
            ek.setValue(v);
        }
        else{
          ek.max=ef.param[p].max;
          ek.defvalue=ef.param[p].def;
          es.defvalue=ef.param[p].def;
          ek.setValue(v);
          es.setValue(v);
        }
      }
      else{
        el.innerHTML="";
        ek.style.display="none";
        ev.style.display="none";
        es.style.display="none";
      }
    }
  }
}
function SelectPatch(p){
  p=parseInt(p);
  if(p<0)
    return;
  SelPatchList(0);
  if(midiif.midiout)
    midiif.Send([0xc0,p]);
  currentpatch=p;
  SelPatchList(1);
  DispPatch();
}
function SelPatchList(f){
  if(currentpatch<0)
    return;
  c=document.getElementById((currentpatch+1)+"nam");
  if(f)
    c.classList.add("sel");
  else
    c.classList.remove("sel");
}
function SendPatch(p){
  p=parseInt(p);
  midiif.Send(patches[p].data);
}
function Edit(p){
  if(!midiif.midiout)
    return;
  if(p)
    midiif.Send([0xf0,0x52,0x00,0x58,0x50,0xf7]);
  else
    midiif.Send([0xf0,0x52,0x00,0x58,0x51,0xf7]);
}
function InstallChecker(){
  this.list=[];
  this.n=0;
  this.norg=0;
  this.porg=null;
  this.Start=function(){
    this.norg=currentpatch;
    SelectPatch(49);
    this.porg=patches[this.norg].data.slice(0);
    this.n=0;
    for(var id in effectlist){
      if(effectlist[id].install==0)
        this.list.push(parseInt(id));
    }
    if(this.list.length>0)
    document.getElementById("instchk").style.display="block";
  };
  this.timer=function(){
    if(this.list.length<=0)
      return;
    document.getElementById("instchkmsg").innerHTML="Effect Install Check...("+this.list.length+")";
    while(this.n<5&&this.list.length>0){
      SetEffect(currentpatch,this.n,GetEffectFromId(this.list.shift()));
      ++this.n;
    }
    this.n=0;
    midiif.SendCurrentPatchVerify(null);
    if(this.list.length<=0){
      setTimeout(function(){
        midiif.Send(this.porg);
        SelectPatch(this.norg);
        document.getElementById("instchk").style.display="none";
      }.bind(this),500);
    }
  };
  setInterval(this.timer.bind(this),500);
}
function InstallCheck(){
  document.getElementById("effectpanelmsg").innerHTML="Install Check";
  document.getElementById("effectpanelbase").style.display="block";
  inst.Start();
}
function Usage(){
  var e=document.getElementById("usage");
  if(e.style.display!="block"){
    e.style.display="block";
  }
  else{
    e.style.display="none";
  }
}
function SaveBank(){
  var d="";
  for(p=0;p<50;++p){
    d+=(p+1)+":"+MakeStr(patches[p].data)+"\r\n";
  }
  var blob=new Blob([d],{"type":"text/plain"});
  var a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.target="_blank";
  a.download="newbank.bank";
  a.click();
}
function LoadBank(){
  var i=document.createElement("input");
  i.type="file";
  i.click();
  i.addEventListener("change",function(ev){
    var file=ev.target.files;
    var reader=new FileReader();
    reader.readAsText(file[0]);
    reader.onload=function(ev){
      console.log(reader.result);
    }
  },false);
}
function Save(){
  var p=currentpatch;
  if(p<0)
    return;
  var n=patches[p].name;
  var fname=n.replace(/\s+$/,"").replace(/ /g,"_");
  var d=MakeStr(patches[p].data);
  var blob=new Blob([d],{"type":"text/plain"});
  var a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.target="_blank";
  a.download=fname+".txt";
  a.click();
}
function Load(){
  var p=currentpatch;
  if(p<0)
    return;
  var i=document.createElement("input");
  i.type="file";
  i.click();
  i.addEventListener("change",function(ev){
    var file=ev.target.files;
    var reader=new FileReader();
    reader.readAsText(file[0]);
    reader.onload=function(ev){
      console.log(reader.result);
      patches[p].data=MakeBin(reader.result);
      patches[p].name=MakeName(patches[p].data);
      document.getElementById((p+1)+"nam").innerHTML=patches[p].name;
      SelectPatch(p);
      SendPatch(p);
    }
  },false);
}
function LoadText(){
  var tar=document.getElementById((currentpatch+1)+"nam");
  var panel=document.getElementById("inputpanel");
  document.getElementById("inputmsg").innerHTML="Load from URL";
  var rc=tar.getBoundingClientRect();
  panel.style.display="block";
  panel.style.left=(rc.left+20+window.pageXOffset)+"px";
  panel.style.top=(rc.top+20+window.pageYOffset)+"px";
  PopupPatchCancel2();
  document.getElementById("inputok").onclick=function(ev){
    var url=document.getElementById("inputtext").value;
    console.log(url);
    fetch(url).then(function(res){
      return res.text();
    }).then(function(body){
      console.log(body);
    })
    document.getElementById("inputpanel").style.display="none";
  };
}
function ShowDoc(x) {
	var divs=document.getElementsByTagName("div");
	var t="doc_"+x;
	for(var i=0;i<divs.length;++i) {
		if(divs[i].className==="doc_ja")
			divs[i].style.display=(x==="ja")?"block":"none";
		if(divs[i].className=="doc_en")
			divs[i].style.display=(x==="ja")?"none":"block";
	}
}
function GetLang() {
	return (navigator.language || navigator.browserLanguage).substring(0, 2);
}
window.addEventListener("load",Init);

</script>
<style>
body{
  background:#348;
  margin:0px;
  padding:0px;
}
#base{
  position:absolute;
  top:0px;
  bottom:0px;
  left:0px;
  right:0px;
  font-family: 'Open Sans', sans-serif;
  font-size:14px;
  font-weight:bold;
  border-radius:5px;
  width:1100px;
  height:570px;
  margin:auto;
  padding:1px 20px 40px 20px;
  background:url(./images/bg.png);
  border-right:3px solid #666;
  border-bottom:3px solid #666;
  border-left:3px solid #fff;
  border-top:3px solid #fff;
  box-shadow:3px 3px 3px 4px rgba(0,0,0,0.3);
}
#info{
  font-size:10px;
  font-weight:normal;
  text-align: left;
}
h1{
  font-family: 'Audiowide', cursive;
  margin:10px 0px 0px 0px;
}
#header{
  position:absolute;
  top:10px;
  left:20px;
  background:#036;
  color:#ddf;
  margin:0px;
  width:1100px;
  height:70px;
}
#header img{
  height:60px;
}
#header .info{
  position: absolute;
  top:10px;
  right:0px;
  width:250px;
  margin-right:10px;
  margin-left:auto;
  font-size:8px;
}
#header a{
  color:#ccf;
}
.popup{
  font-family:'Open Sans', sans-serif;
  font-weight:normal;
  font-size:14px;
  position: absolute;
  display:none;
  width:180px;
  background:#cce;
  border: 1px solid #666;
  border-radius: 3px;
  list-style: none;
  margin:0;
  padding:0;
  box-shadow: 2px 2px 3px 3px rgba(0,0,0,0.4);
}
.popup>li{
  background:#eef;
  text-decoration: none;
  margin:0;
  padding:0;
}
.popup>li>a{
  display:block;
  text-decoration: none;
  color:#226;
  padding:0px 20px;
  cursor:pointer;
}
.popup>li:hover{
  background:#88c;
}
.popup>li>a:hover{
  color:#fff;
}
img{
  margin:0px;
  padding:0px;
}
.patch{
  background: #66f;
  border:1px solid #225;
  border-radius: 5px;
  width:220px;
  height:60px;
}
.menubtn{
  width:120px;
  height:30px;
}
.menubtn[disabled]{
  color:#aaa;
}
#confirmpanel{
  width:200px;
  height:50px;
  padding:10px;
}
#confirmpanel button{
  width:70px;
  margin:5px;
}
#inputpanel{
  width:270px;
  height:100px;
  padding:10px;
}
#inputpanel button{
  width:70px;
  margin:5px;
}
#inputpanel input{
  width:200px;
}
#mainmenu{
  position:absolute;
  width:220px;
  left:15px;
  top:80px;
}
#mainmenu select{
  height:20px;
}
#mainmenu ul{
  padding:0;
  list-style: none;
}
#mainmenu ul li{
  margin:4px;
}
#patchesbase{
  position:absolute;
  left:280px;
  top:90px;
  width:800px;
  background:linear-gradient(#a0b0d0,#9caccc);
  border-top:5px solid #666;
  border-left:12px solid #888;
  border-right:12px solid #ccc;
  border-bottom:5px solid #fff;
  border-radius: 5px;
  box-shadow:14px 14px 14px 14px rgba(0,0,0,0.05) inset;
  padding:5px 10px;
  margin:0px 15px 0px auto;
}
#patches{
  margin:0;
  padding:0;
  border-collapse: collapse;
}
#patches tr{
  margin:0;
  padding:0;
}
#patches td{
  margin:0;
  padding:0;
}
#patches button{
  width:30px;
  height:20px;
  margin:0px 0px 0px 8px;
  padding:0;
}
#patches div{
  display:inline-block;
  margin:0;
  padding:0;
  padding:1px 3px 1px 8px;
  border:1px solid #8ab;
  background:linear-gradient(#b4c4e4,#b0c0e0);
  color:#124;
  height:20px;
  width:120px;
  font-size:14px;
  line-height: 14px;
  vertical-align: middle;
  font-weight: bold;
  box-sizing:border-box
}
#patches div:hover{
  background:linear-gradient(#cde,#bcd);
}
#patches div.sel{
  background:linear-gradient(#c33,#b22);
  color:#fff;
}
#patches div.over{
  border: 2px dotted #44c;
}
#patches div.drag{
  opacity: 0.5;
}
#effects{
  position:absolute;
  top:335px;
  left:40px;
  border-collapse:collapse;
  border-spacing:0px;
  box-shadow:1px 1px 1px 1px rgba(0,0,0,0.3);
}
#effects th {
  width:22px;
}
#effects td{
  width:100px;
  height:32px;
  border:1px solid #888;
  cursor:default;
  background:url(./images/bg-grad.png);
}
#effects td div{
}
#effects td div{
}
#effects td div div{
}
#effects td div div input{
  display:none;
  background:#446;
  color:#ffd;
  width:55px;
  height:12px;
  margin:2px 0px 0px 0px;
  text-align: center;
  font-size:11px;
  font-weight:normal;
  border-radius:3px;
}
#effects .fimg{
  width:40px;
  height:40px;
  margin:-5px 0px 0px -2px;
  float:left;
}
#effects .fnam{
  text-align: center;
  background:linear-gradient(#822,#400);
  color:#fcc;
  width:120px;
  box-sizing:border-box;
  vertical-align:middle;
  position:relative;
  text-align: center;
}
#effects .fnam:hover{
  background:linear-gradient(#a44,#622);
}
#effects .ftxt{
  display:inline;
  position:absolute;
  bottom:4px;
  right:4px;
}
#effects .fnam.drag{
  opacity: 0.5;
}
#effects .fnam.overup{
  border-top: 4px solid #fff;
}
#effects .fnam.overdown{
  border-bottom: 4px solid #fff;
}
#effects .fnam.press{
  background:linear-gradient(#b00 0%,#d77 25%,#d00 50%,#b00 100%);
  color:#fff;
}
#effects .fnam.press:hover{
  background:linear-gradient(#d22 0%,#f99 25%,#f22 50%,#d22 100%);
  color:#fff;
}
.fnum{
  height:40px;
}
.pcell{
  display:flex;
  font-size:12px;
  font-weight:bold;
  height:38px;
  border:none;
  padding:0;
  margin:0;
  box-sizing: border-box;
}
.pfocus{
  border:1px solid #c88;
}
input{
  width:45%;
}
webaudio-knob{
  display:none;
/*  width:32px;*/
  margin:4px 2px 0px 2px;
}
webaudio-switch{
  display:none;
/*  width:32px;*/
}
#effectpanelbase{
  position:absolute;
  display:none;
  left:0;
  top:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.3);
}
#effectpanel{
  position:absolute;
  left:0;
  right:0;
  top:0;
  bottom:0;
  background:url(./images/bg.png);
  border:3px solid #333;
  border-radius: 4px;
  width:1060px;
  height:650px;
  margin:auto;
  padding:5px;
  cursor:default;
  box-shadow:2px 2px 2px 2px rgba(0,0,0,0.4);
}
#effectpanelscr{
  width:990px;
  height:550px;
  margin:4px auto;
  overflow-y:scroll;
  background:#888;
  color:#fff;
}
#effectpanellist{
  width:950px;
}
.efgrp{
  width:880px;
  padding:4px 0px;
  border-bottom:1px solid #000;
}
.efitem{
  display:inline-block;
  border-radius: 3px;
  border:1px solid #668;
  width:80px;
  height:84px;
  padding:0px;
  margin:1px;
  font-size:11px;
  font-weight: normal;
  color:#000;
  cursor:pointer;
  background:linear-gradient(#ddf,#cce);
}
.notinstall{
  background:linear-gradient(#fdd,#ecc);
}
.install{
  background:linear-gradient(#dfd,#cec);
}
.efitem img{
  display:block;
  width:64px;
  height:52px;
  margin:0px auto;
}
.efitem div{
  text-align: center;
}
.efitem:hover{
  background:linear-gradient(#eef,#ddf);
}
.efitem div{
  padding:0px 4px;
}
#instchk{
  display:none;
  position:absolute;
  left:300px;
  top:250px;
  width:400px;
  height:100px;
  padding:10px;
  background:#ccf;
  border:1px solid #000;
  box-shadow:2px 2px 2px 2px rgba(0,0,0,0.4);
  padding:10px;
}

#usage{
  display:none;
  position:absolute;
  left:0;
  top:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.5);
}
#usagepanel{
  position:absolute;
  top:0;
  bottom:0;
  left:0;
  right:0;
  width:900px;
  height:500px;
  margin:auto;
  padding:10px;
  transition:0.5s;
  overflow:hidden;
  font-size:14px;
  font-weight: normal;
  border:1px solid #006;
  border-radius: 5px;
  color:#006;
  background:linear-gradient(#ccf,#b8b8e8);
  box-shadow:1px 1px 1px 1px rgba(0,0,0,0.4);
}
#usagescr{
  width:850px;
  height:420px;
  margin:10px auto;
  overflow-y:scroll;
}
#instchk{
  position:absolute;
  left:0;
  top:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.3);
}
#instchkpanel{
  position:absolute;
  top:0;
  bottom:0;
  right:0;
  left:0;
  margin:auto;
  width:400px;
  height:60px;
  text-align:center;
  line-height:60px;
  padding:5px;
  border:1px solid #006;
  border-radius: 5px;
  color:#006;
  background:linear-gradient(#ccf,#b8b8e8);
  box-shadow:1px 1px 1px 1px rgba(0,0,0,0.4);
}
#scanning{
  display:none;
  position:absolute;
  left:0;
  top:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.3);
}
#scanningpanel{
  position:absolute;
  top:0;
  bottom:0;
  right:0;
  left:0;
  margin:auto;
  width:400px;
  height:60px;
  text-align:center;
  line-height:60px;
  padding:5px;
  border:1px solid #006;
  border-radius: 5px;
  color:#006;
  background:linear-gradient(#ccf,#b8b8e8);
  box-shadow:1px 1px 1px 1px rgba(0,0,0,0.4);
}
#splash{
  position:absolute;
  left:0px;
  top:0px;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.3);
}
#splashpanel{
  position:absolute;
  top:0;
  bottom:0;
  right:0;
  left:0;
  margin:auto;
  width:1060px;
  height:550px;
  text-align:center;
  padding:5px;
  border:1px solid #006;
  border-radius: 5px;
  color:#006;
  background:linear-gradient(#ccf,#b8b8e8);
  box-shadow:1px 1px 1px 1px rgba(0,0,0,0.4);
}
</style>
</head>
<body>
  <div id="base">
    <div id="header">
      <a href="http://www.g200kg.com/" target="_blank"><img src="./images/g200kg160x80.png" style="float:left;margin:4px 11px"/></a>
      <h1>Zoom MS-50G Patch Editor</h1>
      Patch utility for ZOOM MS-50G MultiStomp guitar pedal<div class="info">Source code is available at GitHub : <a href="https://github.com/g200kg/zoom-ms-utility" target="_blank">https://github.com/g200kg/zoom-ms-utility</a></div>
    </div>
    <br/>
    <div id="mainmenu">
      <ul>
        <li>MidiPort : <select id="midiport" onchange="SelectPort()"></select></li>
        <li>Status : <span id="msg">Not Initialized</span></li>
        <li><hr/></li>
        <li><button class="menubtn" id="scanbtn" onclick="Scan()">Scan MS-50G</button></li>
        <li><button class="menubtn" id="usagebtn" onclick="InstallCheck()">Install Check</button></li>
        <li><button class="menubtn" id="usagebtn" onclick="Usage()">How To Use</button></li>
      </ul>
    </div>
    <div id="patchesbase">
      <table id="patches">
        <tr>
          <td id="1"><button id="1btn">1</button><div id="1nam"></div></td>
          <td id="11"><button id="11btn">11</button><div id="11nam"></div></td>
          <td id="21"><button id="21btn">21</button><div id="21nam"></div></td>
          <td id="31"><button id="31btn">31</button><div id="31nam"></div></td>
          <td id="41"><button id="41btn">41</button><div id="41nam"></div></td>
        </tr>
        <tr>
          <td id="2"><button id="2btn">2</button><div id="2nam"></div></td>
          <td id="12"><button id="12btn">12</button><div id="12nam"></div></td>
          <td id="22"><button id="22btn">22</button><div id="22nam"></div></td>
          <td id="32"><button id="32btn">32</button><div id="32nam"></div></td>
          <td id="42"><button id="42btn">42</button><div id="42nam"></div></td>
        </tr>
        <tr>
          <td id="3"><button id="3btn">3</button><div id="3nam"></div></td>
          <td id="13"><button id="13btn">13</button><div id="13nam"></div></td>
          <td id="23"><button id="23btn">23</button><div id="23nam"></div></td>
          <td id="33"><button id="33btn">33</button><div id="33nam"></div></td>
          <td id="43"><button id="43btn">43</button><div id="43nam"></div></td>
        </tr>
        <tr>
          <td id="4"><button id="4btn">4</button><div id="4nam"></div></td>
          <td id="14"><button id="14btn">14</button><div id="14nam"></div></td>
          <td id="24"><button id="24btn">24</button><div id="24nam"></div></td>
          <td id="34"><button id="34btn">34</button><div id="34nam"></div></td>
          <td id="44"><button id="44btn">44</button><div id="44nam"></div></td>
        </tr>
        <tr>
          <td id="5"><button id="5btn">5</button><div id="5nam"></div></td>
          <td id="15"><button id="15btn">15</button><div id="15nam"></div></td>
          <td id="25"><button id="25btn">25</button><div id="25nam"></div></td>
          <td id="35"><button id="35btn">35</button><div id="35nam"></div></td>
          <td id="45"><button id="45btn">45</button><div id="45nam"></div></td>
        </tr>
        <tr>
          <td id="6"><button id="6btn">6</button><div id="6nam"></div></td>
          <td id="16"><button id="16btn">16</button><div id="16nam"></div></td>
          <td id="26"><button id="26btn">26</button><div id="26nam"></div></td>
          <td id="36"><button id="36btn">36</button><div id="36nam"></div></td>
          <td id="46"><button id="46btn">46</button><div id="46nam"></div></td>
        </tr>
        <tr>
          <td id="7"><button id="7btn">7</button><div id="7nam"></div></td>
          <td id="17"><button id="17btn">17</button><div id="17nam"></div></td>
          <td id="27"><button id="27btn">27</button><div id="27nam"></div></td>
          <td id="37"><button id="37btn">37</button><div id="37nam"></div></td>
          <td id="47"><button id="47btn">47</button><div id="47nam"></div></td>
        </tr>
        <tr>
          <td id="8"><button id="8btn">8</button><div id="8nam"></div></td>
          <td id="18"><button id="18btn">18</button><div id="18nam"></div></td>
          <td id="28"><button id="28btn">28</button><div id="28nam"></div></td>
          <td id="38"><button id="38btn">38</button><div id="38nam"></div></td>
          <td id="48"><button id="48btn">48</button><div id="48nam"></div></td>
        </tr>
        <tr>
          <td id="9"><button id="9btn">9</button><div id="9nam"></div></td>
          <td id="19"><button id="19btn">19</button><div id="19nam"></div></td>
          <td id="29"><button id="29btn">29</button><div id="29nam"></div></td>
          <td id="39"><button id="39btn">39</button><div id="39nam"></div></td>
          <td id="49"><button id="49btn">49</button><div id="49nam"></div></td>
        </tr>
        <tr>
          <td id="10"><button id="10btn">10</button><div id="10nam"></div></td>
          <td id="20"><button id="20btn">20</button><div id="20nam"></div></td>
          <td id="30"><button id="30btn">30</button><div id="30nam"></div></td>
          <td id="40"><button id="40btn">40</button><div id="40nam"></div></td>
          <td id="50"><button id="50btn">50</button><div id="50nam"></div></td>
        </tr>
      </table>
    </div>
    <table id="effects">
      <tr>
        <th><button class="fnum" id="fnum1">1</button></th><td id="fnam1" class="fnam"><img id="fimg1" class="fimg"/><div id="ftxt1" class="ftxt"></div></td>
        <td><div class="pcell pfocus" id="f1p1"><webaudio-knob id="f1p1k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f1p1s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f1p1v" disabled/></div><div id="f1p1l"></div></div></div></td>
        <td><div class="pcell" id="f1p2"><webaudio-knob id="f1p2k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f1p2s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f1p2v" disabled/></div><div id="f1p2l"></div></div></div></td>
        <td><div class="pcell" id="f1p3"><webaudio-knob id="f1p3k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f1p3s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f1p3v" disabled/></div><div id="f1p3l"></div></div></div></td>
        <td><div class="pcell" id="f1p4"><webaudio-knob id="f1p4k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f1p4s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f1p4v" disabled/></div><div id="f1p4l"></div></div></div></td>
        <td><div class="pcell" id="f1p5"><webaudio-knob id="f1p5k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f1p5s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f1p5v" disabled/></div><div id="f1p5l"></div></div></div></td>
        <td><div class="pcell" id="f1p6"><webaudio-knob id="f1p6k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f1p6s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f1p6v" disabled/></div><div id="f1p6l"></div></div></div></td>
        <td><div class="pcell" id="f1p7"><webaudio-knob id="f1p7k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f1p7s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f1p7v" disabled/></div><div id="f1p7l"></div></div></div></td>
        <td><div class="pcell" id="f1p8"><webaudio-knob id="f1p8k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f1p8s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f1p8v" disabled/></div><div id="f1p8l"></div></div></div></td>
        <td><div class="pcell" id="f1p9"><webaudio-knob id="f1p9k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f1p9s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f1p9v" disabled/></div><div id="f1p9l"></div></div></div></td>
      </tr>
      <tr>
        <th><button class="fnum" id="fnum2">2</button></th><td id="fnam2" class="fnam"><img id="fimg2" class="fimg"/><div id="ftxt2" class="ftxt"></div></td>
        <td><div class="pcell" id="f2p1"><webaudio-knob id="f2p1k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f2p1s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f2p1v" disabled/></div><div id="f2p1l"></div></div></div></td>
        <td><div class="pcell" id="f2p2"><webaudio-knob id="f2p2k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f2p2s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f2p2v" disabled/></div><div id="f2p2l"></div></div></div></td>
        <td><div class="pcell" id="f2p3"><webaudio-knob id="f2p3k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f2p3s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f2p3v" disabled/></div><div id="f2p3l"></div></div></div></td>
        <td><div class="pcell" id="f2p4"><webaudio-knob id="f2p4k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f2p4s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f2p4v" disabled/></div><div id="f2p4l"></div></div></div></td>
        <td><div class="pcell" id="f2p5"><webaudio-knob id="f2p5k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f2p5s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f2p5v" disabled/></div><div id="f2p5l"></div></div></div></td>
        <td><div class="pcell" id="f2p6"><webaudio-knob id="f2p6k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f2p6s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f2p6v" disabled/></div><div id="f2p6l"></div></div></div></td>
        <td><div class="pcell" id="f2p7"><webaudio-knob id="f2p7k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f2p7s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f2p7v" disabled/></div><div id="f2p7l"></div></div></div></td>
        <td><div class="pcell" id="f2p8"><webaudio-knob id="f2p8k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f2p8s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f2p8v" disabled/></div><div id="f2p8l"></div></div></div></td>
        <td><div class="pcell" id="f2p9"><webaudio-knob id="f2p9k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f2p9s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f2p9v" disabled/></div><div id="f2p9l"></div></div></div></td>
      </tr>
      <tr>
        <th><button class="fnum" id="fnum3">3</button></th><td id="fnam3" class="fnam"><img id="fimg3" class="fimg"/><div id="ftxt3" class="ftxt"></div></td>
        <td><div class="pcell" id="f3p1"><webaudio-knob id="f3p1k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f3p1s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f3p1v" disabled/></div><div id="f3p1l"></div></div></div></td>
        <td><div class="pcell" id="f3p2"><webaudio-knob id="f3p2k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f3p2s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f3p2v" disabled/></div><div id="f3p2l"></div></div></div></td>
        <td><div class="pcell" id="f3p3"><webaudio-knob id="f3p3k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f3p3s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f3p3v" disabled/></div><div id="f3p3l"></div></div></div></td>
        <td><div class="pcell" id="f3p4"><webaudio-knob id="f3p4k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f3p4s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f3p4v" disabled/></div><div id="f3p4l"></div></div></div></td>
        <td><div class="pcell" id="f3p5"><webaudio-knob id="f3p5k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f3p5s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f3p5v" disabled/></div><div id="f3p5l"></div></div></div></td>
        <td><div class="pcell" id="f3p6"><webaudio-knob id="f3p6k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f3p6s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f3p6v" disabled/></div><div id="f3p6l"></div></div></div></td>
        <td><div class="pcell" id="f3p7"><webaudio-knob id="f3p7k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f3p7s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f3p7v" disabled/></div><div id="f3p7l"></div></div></div></td>
        <td><div class="pcell" id="f3p8"><webaudio-knob id="f3p8k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f3p8s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f3p8v" disabled/></div><div id="f3p8l"></div></div></div></td>
        <td><div class="pcell" id="f3p9"><webaudio-knob id="f3p9k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f3p9s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f3p9v" disabled/></div><div id="f3p9l"></div></div></div></td>
      </tr>
      <tr>
        <th><button class="fnum" id="fnum4">4</button></th><td id="fnam4" class="fnam"><img id="fimg4" class="fimg"/><div id="ftxt4" class="ftxt"></div></td>
        <td><div class="pcell" id="f4p1"><webaudio-knob id="f4p1k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f4p1s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f4p1v" disabled/></div><div id="f4p1l"></div></div></div></td>
        <td><div class="pcell" id="f4p2"><webaudio-knob id="f4p2k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f4p2s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f4p2v" disabled/></div><div id="f4p2l"></div></div></div></td>
        <td><div class="pcell" id="f4p3"><webaudio-knob id="f4p3k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f4p3s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f4p3v" disabled/></div><div id="f4p3l"></div></div></div></td>
        <td><div class="pcell" id="f4p4"><webaudio-knob id="f4p4k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f4p4s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f4p4v" disabled/></div><div id="f4p4l"></div></div></div></td>
        <td><div class="pcell" id="f4p5"><webaudio-knob id="f4p5k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f4p5s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f4p5v" disabled/></div><div id="f4p5l"></div></div></div></td>
        <td><div class="pcell" id="f4p6"><webaudio-knob id="f4p6k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f4p6s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f4p6v" disabled/></div><div id="f4p6l"></div></div></div></td>
        <td><div class="pcell" id="f4p7"><webaudio-knob id="f4p7k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f4p7s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f4p7v" disabled/></div><div id="f4p7l"></div></div></div></td>
        <td><div class="pcell" id="f4p8"><webaudio-knob id="f4p8k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f4p8s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f4p8v" disabled/></div><div id="f4p8l"></div></div></div></td>
        <td><div class="pcell" id="f4p9"><webaudio-knob id="f4p9k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f4p9s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f4p9v" disabled/></div><div id="f4p9l"></div></div></div></td>
      </tr>
      <tr>
        <th><button class="fnum" id="fnum5">5</button></th><td id="fnam5" class="fnam"><img id="fimg5" class="fimg"/><div id="ftxt5" class="ftxt"></div></td>
        <td><div class="pcell" id="f5p1"><webaudio-knob id="f5p1k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f5p1s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f5p1v" disabled/></div><div id="f5p1l"></div></div></div></td>
        <td><div class="pcell" id="f5p2"><webaudio-knob id="f5p2k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f5p2s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f5p2v" disabled/></div><div id="f5p2l"></div></div></div></td>
        <td><div class="pcell" id="f5p3"><webaudio-knob id="f5p3k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f5p3s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f5p3v" disabled/></div><div id="f5p3l"></div></div></div></td>
        <td><div class="pcell" id="f5p4"><webaudio-knob id="f5p4k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f5p4s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f5p4v" disabled/></div><div id="f5p4l"></div></div></div></td>
        <td><div class="pcell" id="f5p5"><webaudio-knob id="f5p5k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f5p5s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f5p5v" disabled/></div><div id="f5p5l"></div></div></div></td>
        <td><div class="pcell" id="f5p6"><webaudio-knob id="f5p6k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f5p6s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f5p6v" disabled/></div><div id="f5p6l"></div></div></div></td>
        <td><div class="pcell" id="f5p7"><webaudio-knob id="f5p7k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f5p7s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f5p7v" disabled/></div><div id="f5p7l"></div></div></div></td>
        <td><div class="pcell" id="f5p8"><webaudio-knob id="f5p8k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f5p8s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f5p8v" disabled/></div><div id="f5p8l"></div></div></div></td>
        <td><div class="pcell" id="f5p9"><webaudio-knob id="f5p9k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f5p9s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f5p9v" disabled/></div><div id="f5p9l"></div></div></div></td>
      </tr>
      <tr>
        <th><button class="fnum" id="fnum6">6</button></th><td id="fnam6" class="fnam"><img id="fimg6" class="fimg"/><div id="ftxt6" class="ftxt"></div></td>
        <td><div class="pcell" id="f6p1"><webaudio-knob id="f6p1k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f6p1s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f6p1v" disabled/></div><div id="f6p1l"></div></div></div></td>
        <td><div class="pcell" id="f6p2"><webaudio-knob id="f6p2k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f6p2s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f6p2v" disabled/></div><div id="f6p2l"></div></div></div></td>
        <td><div class="pcell" id="f6p3"><webaudio-knob id="f6p3k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f6p3s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f6p3v" disabled/></div><div id="f6p3l"></div></div></div></td>
        <td><div class="pcell" id="f6p4"><webaudio-knob id="f6p4k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f6p4s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f6p4v" disabled/></div><div id="f6p4l"></div></div></div></td>
        <td><div class="pcell" id="f6p5"><webaudio-knob id="f6p5k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f6p5s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f6p5v" disabled/></div><div id="f6p5l"></div></div></div></td>
        <td><div class="pcell" id="f6p6"><webaudio-knob id="f6p6k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f6p6s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f6p6v" disabled/></div><div id="f6p6l"></div></div></div></td>
        <td><div class="pcell" id="f6p7"><webaudio-knob id="f6p7k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f6p7s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f6p7v" disabled/></div><div id="f6p7l"></div></div></div></td>
        <td><div class="pcell" id="f6p8"><webaudio-knob id="f6p8k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f6p8s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f6p8v" disabled/></div><div id="f6p8l"></div></div></div></td>
        <td><div class="pcell" id="f6p9"><webaudio-knob id="f6p9k" diameter="32" src="./images/ms50gknob.png" sprites="100"></webaudio-knob><webaudio-switch id="f6p9s" src="./images/switch.png" width="32" height="32"></webaudio-switch><div><div><input id="f6p9v" disabled/></div><div id="f6p9l"></div></div></div></td>
      </tr>
    </table>
  </div>

  <ul id="popuppatch" class="popup">
    <li><a onclick="PopupPatchOverwrite()">Overwrite</a></li>
    <li><a onclick="PopupPatchExchange()">Exchange</a></li>
    <li><a onclick="PopupPatchCancel()">Cancel</a></li>
  </ul>

  <ul id="popuppatch2" class="popup">
    <li><a onclick="PopupPatchCopy()">Copy</a></li>
    <li><a onclick="PopupPatchPaste()">Paste</a></li>
    <li><a onclick="PopupPatchDelete()">Delete</a></li>
    <li><a onclick="PopupPatchRename()">Rename</a></li>
    <li><a onclick="Save()">Save To File</a></li>
    <li><a onclick="Load()">Load From File</a></li>
    <li><a onclick="PopupPatchCancel2()">Cancel</a></li>
  </ul>

  <ul id="popupeffect" class="popup">
    <li><a onclick="PopupEffectReplace()">Add/Replace</a></li>
    <li><a onclick="PopupEffectInsert()">Insert Space</a></li>
    <li><a onclick="PopupEffectUp()">Move Up</a></li>
    <li><a onclick="PopupEffectDown()">Move Down</a></li>
    <li><a onclick="PopupEffectDelete()">Delete</a></li>
    <li><a onclick="PopupEffectCancel()">Cancel</a></li>
  </ul>

  <div id="inputpanel" class="popup">
    <div id="inputmsg"></div>
    <input id="inputtext"/><br/>
    <button id="inputcancel" onclick="this.parentNode.style.display='none'">Cancel</button> <button id="inputok">Ok</button>
  </div>

  <div id="confirmpanel" class="popup">
    <div id="confirmmsg"></div>
    <button id="confirmcancel" onclick="this.parentNode.style.display='none'">Cancel</button> <button id="confirmok">Ok</button>
  </div>

  <div id="effectpanelbase">
    <div id="effectpanel">
      <div id="effectpanelmsg">Add/Replace Effect</div>
      <div id="effectpanelscr">
        <div id="effectpanellist">
          <table>
            <tr>
              <th>COMP</th><td><div class="efgrp" id="efCOMP"></div></td>
            </tr>
            <tr>
              <th>FILTER</th><td><div class="efgrp" id="efFILTER"></div></td>
            </tr>
            <tr>
              <th>DRIVE</th><td><div class="efgrp" id="efDRIVE"></div></td>
            </tr>
            <tr>
              <th>AMP</th><td><div class="efgrp" id="efAMP"></div></td>
            </tr>
            <tr>
              <th>MOD</th><td><div class="efgrp" id="efMOD"></div></td>
            </tr>
            <tr>
              <th>SFX</th><td><div class="efgrp" id="efSFX"></div></td>
            </tr>
            <tr>
              <th>DELAY</th><td><div class="efgrp" id="efDELAY"></div></td>
            </tr>
            <tr>
              <th>REVERB</th><td><div class="efgrp" id="efREVERB"></div></td>
            </tr>
          </table>
        </div>
      </div>
      <button onclick="EffectPanelCancel()" style="width:120px;height:30px;margin:5px">Cancel</button>
      <button onclick="inst.Start()" style="width:120px;height:30px;margin:5px">Install Check</button>
    </div>
  </div>

  <div id="usage">
    <div id="usagepanel">
      <button onclick="ShowDoc('en')" style="width:80px">English</button> | <button onclick="ShowDoc('ja')" style="width:80px">Japanese</button>
      <div id="usagescr">
        <div class="doc_en">
          <h3>Usage</h3>
          <ul>
            <li>Launch<br/>
              <ul>
                <li>Connect PC/Mac to MS-50G via USB</li>
                <li>Launch this page. You should use Latest Chrome. On Windows, unplugging the USB while running may cause freeze (under investigation). Once close all Chrome window if you have MidiPort detection problem.</li>
                <li>Press accept if 'MIDI device' permission dialog is displayed  (press keyboard icon on right edge of address bar and retry if you make a mistake)</li>
                <li>After splash screen, all patches and effects with parameters are displayed</li>
              </ul>
            </li>
            <li>Patches<br/>
              <ul>
                <li>Click patch name to select</li>
                <li>Right-click (ctrl+click for Mac) or patch number button will show Context-menu.</li>
                <li>From context-menu, Copy/Paste/Rename/etc patches</li>
                <li>By SaveToFile/LoadFromFile, each patch can be backup/restore to local file</li>
                <li>If you want to choose save directory when 'SaveToFile', I recommend change Chrome setting of setting-detail-download confirm folder</li>
                <li>Patches are draggable to another position for overwrite/exchange</li>
              </ul>
            </li>
            <li>Effects<br/>
              <ul>
                <li>Click effect name to switch effect/bypass</li>
                <li>From right-click or number-button context menu, each effect can be add/move/del</li>
                <li>Each parameter can be edit by drag(coarse)/shift-drag(fine)</li>
                <li>Mouse wheel and Shift+wheel are also available to value edit</li>
                <li>Effects are draggable to another position to change order</li>
              </ul>
            </li>
            <li>Keyboard<br/>
              <ul>
                <li>Keyboard Left/Right is assigned to patch Down/Up, 'a'-'t':patch1-patch20, 'A'-'T':patch21-patch40 '1'-'9','0':patch41-patch50</li>
                <li>Keyboard 'F1'-'F6' is assigned to On/Off each effect.</li>
              </ul>
            </li>
          </ul>
        </div>
        <div class="doc_ja">
          <h3>使い方</h3>
          <ul>
            <li>起動<br/>
              <ul>
                <li>PC または Mac と MS-50G を USB で接続します</li>
                <li>最新版の Chrome を使用してこのページを起動します。Windows では動作中に USB ケーブルを抜くとフリーズする事があります(調査中)。MIDIポートの検出関係で問題がある場合には一度 Chrome の全てのウィンドウを閉じてください</li>
                <li>"MIDIデバイス" のアクセスに関するダイアログが出た場合は、許可してください。(やり直す場合はアドレスバーの右端にあるキーボードのアイコンをクリックします)</li>
                <li>スプラッシュスクリーンの後、パッチの一覧とエフェクトパラメータが表示されます。</li>
              </ul>
            </li>
            <li>パッチ<br/>
              <ul>
                <li>パッチ名をクリックすると選択されます</li>
                <li>右クリック(MacではCtrl+クリック) またはパッチ番号のボタンを押すとコンテキストメニューが表示されます</li>
                <li>コンテキストメニューからはパッチの Copy / Paste / Rename 等が実行できます</li>
                <li>コンテキストメニューの SaveToFile / LoadFromFile はパッチをローカルファイルに保存/読み込みを行います</li>
                <li>SaveToFile で保存されるフォルダを毎回選択するには Chrome のダウンロードの詳細設定を変更してください</li>
                <li>パッチのポジションを変更するにはパッチ名をドラッグしてください。ドロップした際に上書きか交換を選択できます</li>
              </ul>
            </li>
            <li>エフェクト<br/>
              <ul>
                <li>エフェクト名をクリックすると、エフェクトのオン/オフが切り替わります</li>
                <li>エフェクト名を右クリックまたはエフェクト番号のボタンを押すとコンテキストメニューが表示され、エフェクトの追加や削除、移動ができます</li>
                <li>エフェクトの各パラメータの調整はドラッグ(微調整はShift + ドラッグ)で行います。</li>
                <li>また、マウスホイールの操作でパラメータ調整を行う事もできます。微調整は (Shift + マウスホイール)で行います</li>
                <li>エフェクト名をドラッグする事で順番を入れ替える事ができます</li>
              </ul>
            </li>
            <li>キーボード<br/>
              <ul>
                <li>左右キーはパッチの上下に割り当てられています。またキーの 'a'～'t'はパッチ1～20、'A'～'T'はパッチ21～40、'1'～'9','0'はパッチ41～50に割り当てられています</li>
                <li>キーボードの 'F1' ～ 'F6' はエフェクトの1～6のオン/オフを切り替えます</li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
      <button onclick="Usage()">close</button>
    </div>
  </div>

  <div id="instchk">
    <div id="instchkpanel">
      <div id="instchkmsg">Install Checking...</div>
    </div>
  </div>

  <div id="scanning">
    <div id="scanningpanel">
      <div id="scanningmsg">Scanning...</div>
    </div>
  </div>

  <div id="splash">
    <div id="splashpanel">
      <h1>Zoom MS-50G Patch Editor</h1>
      <img src="./images/g200kg160x80.png"/><br/>
      <p>This is a browser based ZOOM MS-50G patch editor<br/>
      Launch this page with latest Chrome after connect ZOOM MS-50G via USB.</p>
      <p>これはブラウザで動作する ZOOM MS-50G 用のパッチエディタです<br/>
        ZOOM MS-50G を USB で接続した後、このページを起動してください。</p>
      <hr style="clear:both"/>
      <p style="font-size:12px">
        This is still very tentative version for the confirmation of MIDI related fucntion.<br/>
        If you are interested in MS-50G MIDI related function, check GitHub repository<br/>
        <a href="https://github.com/g200kg/zoom-ms-utility">GitHub repository</a>
      </p>
      <button onclick="document.getElementById('splash').style.display='none';Scan()" style="width:150px;height:40px">START</button>
    </div>
  </div>

</body>
</html>
